!function(e){function t(t){for(var a,i,o=t[0],c=t[1],l=t[2],u=0,h=[];u<o.length;u++)i=o[u],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&h.push(r[i][0]),r[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);for(d&&d(t);h.length;)h.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,o=1;o<n.length;o++){var c=n[o];0!==r[c]&&(a=!1)}a&&(s.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},r={0:0},s=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var o=window.webpackJsonp=window.webpackJsonp||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var d=c;s.push(["2YZa",1]),n()}({"2YZa":function(e,t,n){"use strict";n.r(t);var a=n("hR4L"),r=n("3mns"),s=n("D2wA"),i=n("bBLm"),o=n("78K9"),c=n("LDcz"),l=n("gTkT"),d=n("q1tI"),u=n.n(d),h=n("i8i4"),m=n.n(h),f=n("Ty5D"),p=n("55Ip"),g=n("uqg9"),b=n("sByA"),w=n("Ypxj"),y=n("ypaI"),v=n("+glh"),E=n.n(v);class k{constructor(){this.listeners=[],this.event=this.event.bind(this)}event(e,t,...n){const a={listener:e,thisArg:t,args:n};this.listeners.push(a);const r=()=>{const e=this.listeners.indexOf(a);e>0&&this.listeners.splice(e,1)};return r.dispose=r,r}fire(e){for(const t of this.listeners.slice())t.listener.apply(t.thisArg,[e,...t.args])}dispose(){this.listeners.length=0}}class D extends k{async fire(e){for(const t of this.listeners)await t.listener.apply(t.thisArg,[e,...t.args])}}class O{constructor(){this.disposables=[]}addDisposable(e){return this.disposables.push(e),e}dispose(){for(const e of this.disposables)e.dispose();this.disposables=[]}}class j extends O{add(e){return this.addDisposable(e)}}const S=BigInt(0),C=BigInt(1),A=BigInt(2),x=A**BigInt(64);function _(e,t=0,n=e.byteLength-t){const a=new DataView(e);let r=S;for(let e=t;e<t+n;e+=8){r*=x;r+=a.getBigUint64(e,!1)}return r}function I(e,t,n=0){const a=new DataView(e);for(;t>S;)a.setBigUint64(n,t,!0),n+=8,t/=x}function U(e){return[_(e,38,256),_(e,303,256)]}function L(e){const[t]=U(e),n=new ArrayBuffer(524),a=new DataView(n);a.setUint32(0,64,!0);const r=function(e,t){if([e,t]=[Number(e),Number(t)],Number.isNaN(e)||Number.isNaN(t))return NaN;if(!(e=(e%t+t)%t)||t<2)return NaN;const n=[];let a=t;for(;a;)[e,a]=[a,e%a],n.push({a:e,b:a});if(1!==e)return NaN;let r=1,s=0;for(let e=n.length-2;e>=0;--e)[r,s]=[s,r-s*Math.floor(n[e].a/n[e].b)];return(s%t+t)%t}(Number(BigInt.asUintN(32,t)*BigInt(-1)),2**32);return a.setUint32(4,r,!0),I(n,t,8),I(n,BigInt(2)**BigInt(4096)%t,264),a.setUint32(520,65537,!0),n}const P=[48,33,48,9,6,5,43,14,3,2,26,5,0,4,20];function N(e,t){const[n,a]=U(e),r=new Uint8Array(256);let s=0;r[s]=0,s+=1,r[s]=1,s+=1;const i=r.length-P.length-t.byteLength-1;for(;s<i;)r[s]=255,s++;r[s]=0,s+=1,r.set(new Uint8Array(P),s),s+=P.length,r.set(new Uint8Array(t),s);let o=function(e,t,n){if(n===C)return S;let a=C;for(e%=n;t>S;)BigInt.asUintN(1,t)===C&&(a=a*e%n),t>>=C,e=e**A%n;return a}(_(r.buffer),a,n);const c=new ArrayBuffer(256);return function(e,t,n=0){const a=[];for(;t>S;)a.push(BigInt.asUintN(64,t)),t/=x;const r=new DataView(e);for(let e=a.length-1;e>=0;e-=1)r.setBigUint64(n,a[e],!1),n+=8}(c,o),c}var B,T;!function(e){e.command=function(e){const t=e.length;if(4!==t)throw new Error("AdbPacket: command.length mismatch. Expected 4, but got "+t)},e.magic=function(e){const t=4294967295^e.getUint32(0),n=e.getInt32(20);if(t!==n)throw new Error(`AdbPacket: magic number mismatch. Expected ${t}, but got ${n}`)}}(B||(B={})),function(e){e.Connect="CNXN",e.Auth="AUTH",e.OK="OKAY",e.Close="CLSE",e.Write="WRTE",e.Open="OPEN"}(T||(T={}));class W{constructor(e,t,n,a,r){this.backend=e,B.command(t),this.command=t,this.arg0=n,this.arg1=a,"string"==typeof r?this.payloadString=r:this.payload=r}static async parse(e){let t=await e.read(24);24!==t.byteLength&&(t=await e.read(24));const n=new DataView(t);B.magic(n);const a=e.decodeUtf8(t.slice(0,4)),r=n.getUint32(4,!0),s=n.getUint32(8,!0),i=n.getUint32(12,!0);let o;return 0!==i&&(o=await e.read(i)),new W(e,a,r,s,o)}static send(e,t,n,a,r){return new W(e,t,n,a,r).send()}get payloadLength(){return this._payloadLength}get payload(){return this._payload}set payload(e){void 0!==e?(this._payloadLength=e.byteLength,this._payload=e):(this._payloadLength=0,this._payload=void 0),this._payloadString=void 0}get payloadString(){if(this._payload)return this._payloadString||(this._payloadString=this.backend.decodeUtf8(this._payload)),this._payloadString}set payloadString(e){void 0!==e?(this.payload=this.backend.encodeUtf8(e),this._payloadString=e):this.payload=void 0}async send(){const e=new ArrayBuffer(24);new Uint8Array(e).set(new Uint8Array(this.backend.encodeUtf8(this.command)));const t=new DataView(e);t.setUint32(4,this.arg0,!0),t.setUint32(8,this.arg1,!0),t.setUint32(12,this.payloadLength,!0),t.setUint32(16,0,!0),t.setUint32(20,4294967295^t.getUint32(0,!0),!0),await this.backend.write(e),this.payload&&await this.backend.write(this.payload)}}class R{constructor(e=!1){this.list=[],this.blocking=e}wait(){if(!this.blocking&&(this.blocking=!0,0===this.list.length))return Promise.resolve();const e=new v.PromiseResolver;return this.list.push(e),e.promise}notify(){0!==this.list.length?this.list.pop().resolve():this.blocking=!1}dispose(){for(const e of this.list)e.reject(new Error("The AutoResetEvent has been disposed"));this.list.length=0}}let F=[],z=[],M=0;function K(e,t){const n=e.charCodeAt(0),a=t.charCodeAt(0),r=a-n+1;for(let e=n;e<=a;e++)z.push(String.fromCharCode(e));F.push({start:n,length:r,end:a,offset:n-M}),M+=r}function V(e){const t=e.charCodeAt(0);let n=0,a=F.length-1,r=a>>1;for(;;){const e=F[r];if(t<e.start)a=r-1;else{if(!(t>e.end))return t-e.offset;n=r+1}r=n+a>>1}}function Q(e){const t=new Uint8Array(e),n=e.byteLength,a=n%3;let r="",s=0;for(;s<n-a;){const e=t[s];s+=1;const n=t[s];s+=1;const a=t[s];s+=1,r+=z[e>>2],r+=z[(3&e)<<4|n>>4],r+=z[(15&n)<<2|a>>6],r+=z[63&a]}if(1===a){const e=t[s];r+=z[e>>2],r+=z[(3&e)<<4],r+="=="}else if(2===a){const e=t[s];s+=1;const n=t[s];r+=z[e>>2],r+=z[(3&e)<<4|n>>4],r+=z[(15&n)<<2],r+="="}return r}K("A","Z"),K("a","z"),K("0","9"),K("+","+"),K("/","/"),F=F.sort((e,t)=>e.end-t.end);class G{constructor(){this.pullQueue=[],this.pushQueue=[],this.ended=!1,this.pendingLowWaterEvent=!1,this.lowWaterEvent=new k}get onLowWater(){return this.lowWaterEvent.event}}class H{constructor(e){this.maxConsumerCount=1/0,this.highWaterMark=10,this.lowWaterMark=0,this.state=e}get onLowWater(){return this.state.lowWaterEvent.event}push(e){return this.state.pullQueue.length?(this.state.pullQueue.shift().resolve({done:!1,value:e}),!0):(this.state.pushQueue.push(e),this.state.pushQueue.length<this.highWaterMark||(this.state.pendingLowWaterEvent=!0,!1))}end(){for(this.state.ended=!0;this.state.pullQueue.length;)this.state.pullQueue.shift().resolve({done:!0,value:void 0});this.state.cleanup(this.state.pushQueue)}}class ${constructor(e){this.initializer=e}[Symbol.asyncIterator](){const e=new G,t=new H(e);return e.cleanup=this.initializer(t),{next(){if(e.pushQueue.length){const n=e.pushQueue.shift();return e.pendingLowWaterEvent&&e.pushQueue.length<=t.lowWaterMark&&e.lowWaterEvent.fire(),Promise.resolve({done:!1,value:n})}if(e.ended)return Promise.resolve({done:!0,value:void 0});if(e.pullQueue.length<t.maxConsumerCount){const t=new v.PromiseResolver;return e.pullQueue.push(t),t.promise}return Promise.reject(new Error("Max consumer count exceeded"))},return:()=>(t.end(),Promise.resolve({done:!0,value:void 0}))}}}var q;!function(e){e[e.Token=1]="Token",e[e.Signature=2]="Signature",e[e.PublicKey=3]="PublicKey"}(q||(q={}));const Y=[class{constructor(e){this.iteratorDone=!1,this.backend=e,this.iterator=e.iterateKeys()}async tryAuth(e){if(e.arg0!==q.Token)return;const t=await this.iterator.next();if(t.done)return void(this.iteratorDone=!0);const n=N(t.value,e.payload);return new W(this.backend,T.Auth,q.Signature,0,n)}dispose(){var e,t;this.iteratorDone||null===(t=(e=this.iterator).return)||void 0===t||t.call(e)}},class{constructor(e){this.backend=e}async tryAuth(){var e;let t;const n=this.backend.iterateKeys(),a=await n.next();a.done?t=await this.backend.generateKey():(t=a.value,await(null===(e=n.return)||void 0===e?void 0:e.call(n)));const r=L(t);return new W(this.backend,T.Auth,q.PublicKey,0,Q(r)+"\0")}dispose(){}}];class Z extends O{constructor(e,t){super(),this.index=0,this.authenticators=e.map(e=>this.addDisposable(new e(t)))}async tryNextAuth(e){for(;this.index<this.authenticators.length;){const t=await this.authenticators[this.index].tryAuth(e);if(t)return t;this.index+=1}throw new Error("Cannot authenticate with device")}}class J{constructor(e){this.mode="read",this.extraBuffers=[],this.stream=e}get backend(){return this.stream.backend}get localId(){return this.stream.localId}get remoteId(){return this.stream.remoteId}async read(e){if("none"!==this.mode&&"read"!==this.mode)throw new Error(`This BufferedStream is in ${this.mode} mode`);let t,n;if(this.readIterator||(this.readIterator=this[Symbol.asyncIterator]()),this.mode="read",this.readBuffer){const a=this.readBuffer;if(a.byteLength>e)return this.readBuffer=a.slice(e),a.slice(0,e);t=new Uint8Array(e),t.set(new Uint8Array(a)),n=a.byteLength,this.readBuffer=void 0}else t=new Uint8Array(e),n=0;for(;n<e;){const a=await this.readIterator.next();if(a.done)throw new Error("This BufferedStream has been closed");const r=a.value;if(r.byteLength>e-n)return t.set(new Uint8Array(r.slice(0,e)),n),this.readBuffer=r.slice(e),t.buffer;t.set(new Uint8Array(r),n),n+=r.byteLength}return t.buffer}async readAll(){let e="";for await(const t of this)e+=this.stream.backend.decodeUtf8(t);return e}write(e){return this.stream.write(e)}close(){return this.stream.close()}[Symbol.asyncIterator](){var e,t;return this.readIterator&&(null===(t=(e=this.readIterator).return)||void 0===t||t.call(e),this.readIterator=void 0),new $(e=>{e.maxConsumerCount=1;for(const t of this.extraBuffers)e.push(t);this.extraBuffers.length=0;const t=new j,n=new R(!0);return t.add(this.stream.onData(t=>{if(!e.push(t))return n.wait()})),t.add(this.stream.onClose(()=>{e.end()})),t.add(e.onLowWater(()=>{n.notify()})),this.mode="iterate",e=>{this.extraBuffers=e,this.mode="none",t.dispose()}})[Symbol.asyncIterator]()}}class X extends O{constructor(e,t,n){super(),this.writeLock=this.addDisposable(new R),this.dataEvent=this.addDisposable(new D),this.closeEvent=this.addDisposable(new k),this.localId=e,this.remoteId=t,this.dispatcher=n}get backend(){return this.dispatcher.backend}get onClose(){return this.closeEvent.event}async write(e){await this.writeLock.wait(),await this.dispatcher.sendPacket(T.Write,this.localId,this.remoteId,e)}ack(){this.writeLock.notify()}close(){return this.dispatcher.sendPacket(T.Close,this.localId,this.remoteId)}dispose(){this.closeEvent.fire(),super.dispose()}}class ee extends O{constructor(e){super(),this.initializers=new E.a(1),this.streams=new Map,this.packetEvent=this.addDisposable(new k),this.errorEvent=this.addDisposable(new k),this._running=!0,this.backend=e,this.receiveLoop()}get onPacket(){return this.packetEvent.event}get onError(){return this.errorEvent.event}get running(){return this._running}async createStream(e){const[t,n]=this.initializers.add();await this.sendPacket(T.Open,t,0,e);const a=await n,r=new X(t,a,this);return this.streams.set(r.localId,r),new te(r)}sendPacket(e,t,n,a){return 1===arguments.length?e.send():W.send(this.backend,e,t,n,a)}dispose(){this._running=!1;for(const e of this.streams.values())e.dispose();this.streams.clear(),super.dispose()}async receiveLoop(){try{for(;this._running;){const e=await W.parse(this.backend);switch(e.command){case T.OK:if(this.initializers.resolve(e.arg1,e.arg0))continue;if(this.streams.has(e.arg1)){this.streams.get(e.arg1).ack();continue}this.sendPacket(T.Close,e.arg1,e.arg0);continue;case T.Close:if(0===e.arg0){this.initializers.reject(e.arg1,new Error("open failed"));continue}if(this.streams.has(e.arg1)){this.streams.get(e.arg1).dispose(),this.streams.delete(e.arg1);continue}continue;case T.Write:this.streams.has(e.arg1)&&(await this.streams.get(e.arg1).dataEvent.fire(e.payload),await this.sendPacket(T.OK,e.arg1,e.arg0));continue}const t={handled:!1,packet:e};if(this.packetEvent.fire(t),!t.handled)return void this.dispose()}}catch(e){if(!this._running)return;this.errorEvent.fire(e)}}}class te{constructor(e){this.controller=e}get backend(){return this.controller.backend}get localId(){return this.controller.localId}get remoteId(){return this.controller.remoteId}get onData(){return this.controller.dataEvent.event}get onClose(){return this.controller.onClose}write(e){return this.controller.write(e)}close(){return this.controller.close()}}var ne,ae,re,se;!function(e){e.List="LIST",e.Send="SEND",e.Stat="STAT",e.Data="DATA",e.Done="DONE",e.Receive="RECV"}(ne||(ne={})),function(e){e.Entry="DENT",e.Done="DONE",e.Data="DATA",e.Ok="OKAY"}(ae||(ae={}));class ie{constructor(e){this.id=e}}class oe extends ie{constructor(e,t){super(e),this.value=t}toBuffer(e){const t=e.encodeUtf8(this.value),n=new Uint8Array(8+t.byteLength),a=e.encodeUtf8(this.id);n.set(new Uint8Array(a));return new DataView(n.buffer).setUint32(4,t.byteLength,!0),n.set(new Uint8Array(t),8),n.buffer}}!function(e){e[e.Directory=4]="Directory",e[e.File=8]="File",e[e.Link=10]="Link"}(re||(re={}));class ce{constructor(e,t,n,a){this.id=ae.Entry,this.type=e>>12,this.mode=4095&e,this.size=t,this.logicalSize=this.type===re.File?this.size:0,this.lastModifiedTime=n,this.name=a}static async parse(e){const t=await e.read(16),n=new DataView(t),a=n.getUint32(0,!0),r=n.getUint32(4,!0),s=n.getUint32(8,!0),i=n.getUint32(12,!0),o=e.backend.decodeUtf8(await e.read(i));return new ce(a,r,s,o)}}class le{constructor(e){this.id=ae.Data,this.data=e}static async parse(e){const t=await e.read(4),n=new DataView(t).getUint32(0,!0),a=await e.read(n);return new le(a)}}class de{constructor(){this.id=ae.Done}}async function ue(e){switch(e.backend.decodeUtf8(await e.read(4))){case ae.Entry:return ce.parse(e);case ae.Data:return le.parse(e);case ae.Done:return await e.read(4),new de;default:throw new Error("")}}class he extends O{constructor(e){super(),this.sendLock=this.addDisposable(new R),this.stream=new J(e)}async*iterate(e){await this.sendLock.wait();try{for(await this.write(new oe(ne.List,e));;){const e=await ue(this.stream);switch(e.id){case ae.Entry:yield e;break;case ae.Done:return;default:throw new Error("Unexpected response id")}}}finally{this.sendLock.notify()}}async list(e){const t=[];for await(const n of this.iterate(e))t.push(n);return t}async*receive(e){await this.sendLock.wait();try{for(await this.write(new oe(ne.Receive,e));;){const e=await ue(this.stream);switch(e.id){case ae.Data:yield e.data;break;case ae.Done:return;default:throw new Error("Unexpected response id")}}}finally{this.sendLock.notify()}}dispose(){super.dispose(),this.stream.close()}write(e){return this.stream.write(e.toBuffer(this.stream.backend))}}!function(e){e.Product="ro.product.name",e.Model="ro.product.model",e.Device="ro.product.device",e.Features="features"}(se||(se={}));class me{constructor(e){this._connected=!1,this.backend=e,this.packetDispatcher=new ee(e),e.onDisconnected(this.dispose,this)}get onDisconnected(){return this.backend.onDisconnected}get connected(){return this._connected}get name(){return this.backend.name}get product(){return this._product}get model(){return this._model}get device(){return this._device}get features(){return this._features}async connect(e=Y){const t=["shell_v2","cmd","stat_v2","ls_v2","fixed_push_mkdir","apex","abb","fixed_push_symlink_timestamp","abb_exec","remount_shell","track_app","sendrecv_v2","sendrecv_v2_brotli","sendrecv_v2_lz4","sendrecv_v2_zstd","sendrecv_v2_dry_run_send"].join(","),n=new v.PromiseResolver,a=new Z(e,this.backend),r=new j;r.add(this.packetDispatcher.onPacket(async e=>{e.handled=!0;const{packet:t}=e;try{switch(t.command){case T.Connect:if(16777217!==t.arg0)throw new Error("Version mismatch");this.parseBanner(t.payloadString),n.resolve();break;case T.Auth:const r=await a.tryNextAuth(e.packet);await this.packetDispatcher.sendPacket(r);break;case T.Close:break;default:throw new Error("Device not in correct state. Reconnect your device and try again")}}catch(e){n.reject(e)}})),r.add(this.packetDispatcher.onError(e=>{n.reject(e)})),await this.packetDispatcher.sendPacket(T.Connect,16777217,1048576,"host::features="+t);try{await n.promise,this._connected=!0}finally{r.dispose()}}parseBanner(e){const t=e.split("::");if(t.length>1){const e=t[1];for(const t of e.split(";")){if(!t)continue;const e=t.split("=");if(2!==e.length)continue;const[n,a]=e;switch(n){case se.Product:this._product=a;break;case se.Model:this._model=a;break;case se.Device:this._device=a;break;case se.Features:this._features=a.split(",")}}}}shell(e,...t){return e?this.createStreamAndReadAll(`shell:${e} ${t.join(" ")}`):this.createStream("shell:")}async getDaemonTcpAddresses(){const e=(await this.shell("getprop","service.adb.listen_addrs")).trim();if(e)return e.split(",");let t=(await this.shell("getprop","service.adb.tcp.port")).trim();return t?["0.0.0.0:"+t]:(t=(await this.shell("getprop","persist.adb.tcp.port")).trim(),t?["0.0.0.0:"+t]:[])}setDaemonTcpPort(e=5555){return this.createStreamAndReadAll("tcpip:"+e)}disableDaemonTcp(){return this.createStreamAndReadAll("usb:")}async sync(){const e=await this.createStream("sync:");return new he(e)}async createStream(e){return this.packetDispatcher.createStream(e)}async createStreamAndReadAll(e){const t=await this.createStream(e);return new J(t).readAll()}async dispose(){this.packetDispatcher.dispose(),await this.backend.dispose()}}const fe={classCode:255,subclassCode:66,protocolCode:1},pe=new TextEncoder,ge=new TextDecoder;class be{constructor(e,t,n){this.onDisconnectedEvent=new k,this.onDisconnected=this.onDisconnectedEvent.event,this._device=e,this._inEndpointNumber=t,this._outEndpointNumber=n}static async fromDevice(e){var t;await e.open();for(const n of e.configurations)for(const a of n.interfaces)for(const r of a.alternates)if(r.interfaceSubclass===fe.subclassCode&&r.interfaceClass===fe.classCode&&r.interfaceSubclass===fe.subclassCode){let s,i;(null===(t=e.configuration)||void 0===t?void 0:t.configurationValue)!==n.configurationValue&&await e.selectConfiguration(n.configurationValue),a.claimed||await e.claimInterface(a.interfaceNumber),a.alternate.alternateSetting!==r.alternateSetting&&await e.selectAlternateInterface(a.interfaceNumber,r.alternateSetting);for(const t of r.endpoints)switch(t.direction){case"in":if(s=t.endpointNumber,void 0!==i)return new be(e,s,i);break;case"out":if(i=t.endpointNumber,void 0!==s)return new be(e,s,i)}}throw new Error("Unknown error")}static async pickDevice(){try{const e=await navigator.usb.requestDevice({filters:[fe]});return be.fromDevice(e)}catch(e){switch(e.name){case"NotFoundError":return;default:throw e}}}get name(){return this._device.productName}*iterateKeys(){const e=window.localStorage.getItem("private-key");e&&(yield function(e){let t;t="="===e[e.length-2]?2:"="===e[e.length-1]?1:0;const n=new Uint8Array(e.length/4*3-t);let a=0,r=0;for(;a<e.length-(0!==t?4:0);){const t=V(e[a]);a+=1;const s=V(e[a]);a+=1;const i=V(e[a]);a+=1;const o=V(e[a]);a+=1,n[r]=t<<2|(48&s)>>4,r+=1,n[r]=(15&s)<<4|(60&i)>>2,r+=1,n[r]=(3&i)<<6|o,r+=1}if(1===t){const t=V(e[a]);a+=1;const s=V(e[a]);a+=1;const i=V(e[a]);n[r]=t<<2|(48&s)>>4,r+=1,n[r]=(15&s)<<4|(60&i)>>2}else if(2===t){const t=V(e[a]);a+=1;const s=V(e[a]);n[r]=t<<2|(48&s)>>4}return n.buffer}(e))}async generateKey(){const{privateKey:e}=await crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-1"},!0,["sign","verify"]),t=await crypto.subtle.exportKey("pkcs8",e);return window.localStorage.setItem("private-key",Q(t)),t}encodeUtf8(e){return pe.encode(e)}decodeUtf8(e){return ge.decode(e)}async write(e){await this._device.transferOut(this._outEndpointNumber,e)}async read(e){try{const t=await this._device.transferIn(this._inEndpointNumber,e);return"stall"===t.status&&await this._device.clearHalt("in",this._inEndpointNumber),t.data.buffer}catch(e){throw e instanceof Error&&"NotFoundError"===e.name&&this.onDisconnectedEvent.fire(),e}}async dispose(){this.onDisconnectedEvent.dispose(),await this._device.close()}}var we=n("ZZCj"),ye=n("sGVl"),ve=n("jEFs");function Ee(e,t){return t.displayName=e,Object(d.memo)(t)}const ke=u.a.createContext({show(){}});var De=Ee("ErrorDialogProvider",e=>{const[t,{setTrue:n,setFalse:a}]=Object(ve.a)(!1),[r,s]=Object(d.useState)(),i=Object(d.useMemo)(()=>({show(e){s(e),n()}}),[]);return u.a.createElement(ke.Provider,{value:i},e.children,u.a.createElement(w.a,{hidden:!t,dialogContentProps:{type:we.a.normal,title:"Error",subText:r}},u.a.createElement(ye.a,null,u.a.createElement(g.a,{text:"OK",onClick:a}))))}),Oe=Ee("Connect",({device:e,onDeviceChange:t})=>{const{show:n}=Object(d.useContext)(ke),[a,r]=Object(d.useState)(!1),o=Object(d.useCallback)(async()=>{try{const e=await be.pickDevice();if(e){const n=new me(e);try{r(!0),await n.connect(),t(n)}catch(e){throw n.dispose(),e}}}catch(e){n(e.message)}finally{r(!1)}},[t]),c=Object(d.useCallback)(async()=>{try{await e.dispose(),t(void 0)}catch(e){n(e.message)}},[e]);return Object(d.useEffect)(()=>null==e?void 0:e.onDisconnected(()=>{t(void 0)}),[e,t]),u.a.createElement(u.a.Fragment,null,u.a.createElement(i.a,{horizontal:!0,verticalAlign:"center",tokens:{childrenGap:8,padding:8}},!e&&u.a.createElement(s.a,null,u.a.createElement(g.a,{text:"Connect",onClick:o})),e&&u.a.createElement(s.a,null,u.a.createElement(b.a,{text:"Disconnect",onClick:c})),u.a.createElement(s.a,null,e&&"Connected to "+e.name)),u.a.createElement(w.a,{hidden:!a,dialogContentProps:{title:"Connecting",subText:"Please authorize the connection on your device"}},u.a.createElement(y.a,null)))}),je=(n("p2bk"),n("tqYG"));const Se={tokens:{childrenGap:8,padding:8},verticalFill:!0,className:je.a.slideUpIn10,styles:{root:{overflow:"auto"}}},Ce=Ee("CacheRoute",e=>{const t=Object(f.f)(e),n=Object(d.useRef)(!!t);!n.current&&t&&(n.current=!0);const a=Object(d.useMemo)(()=>({...Se,styles:Object(je.l)(Se.styles,{root:{display:t?"flex":"none"}})}),[!!t]);return n.current?u.a.createElement(i.a,Object.assign({},a),e.children):null}),Ae=Ee("CacheSwitch",e=>{const t=Object(f.e)();let n,a,r=Object(f.f)(),s=[];return u.a.Children.forEach(e.children,e=>{var i;if(u.a.isValidElement(e)){const o=e.type===Ce;if(o&&s.push(e),a)return;const c=null!==(i=e.props.path)&&void 0!==i?i:e.props.from,l=c?Object(f.d)(t.pathname,{...e.props,path:c}):r;l&&(a=l,n=o?void 0:e)}}),u.a.createElement(u.a.Fragment,null,s,n?u.a.cloneElement(n,{location:t,computedMatch:a}):null)});var xe=n("DeEv"),_e=n("AyH7"),Ie=n("9BiO"),Ue=n("JwHi"),Le=n("zv84"),Pe=n("t/Ec"),Ne=n("XIMn"),Be=n("TkDl"),Te=n("9z8q"),We=n("aupw"),Re=n("KWRb"),Fe=n("X0IQ"),ze=n("8weS"),Me=n("6SDC"),Ke=n("v8ot"),Ve=n("33yf"),Qe=n.n(Ve),Ge=n("Nxe8"),He=n.n(Ge);Object(Re.a)(),He.a.mitm="streamsaver/mitm.html";const $e=Object(je.y)({name:{cursor:"pointer","&:hover":{textDecoration:"underline"}}}),qe=[" B"," KB"," MB"," GB"];function Ye(e){const t=e.lastIndexOf(".");return-1===t?"":e.slice(t)}const Ze=(e,t)=>e&&t?t({...e,styles:Object(je.l)(e.styles,{root:{paddingTop:0}})}):null;function Je(e){return new Promise(t=>{setTimeout(t,e)})}function Xe(e){return new ReadableStream({async pull(t){const{desiredSize:n}=t;if(!n||n<0)return;let a=0;for(;a<n;){const n=await e.next();if(n.done)return void t.close();t.enqueue(new Uint8Array(n.value)),a+=n.value.byteLength}}})}var et=Ee("FileManager",({device:e})=>{const{show:t}=Object(d.useContext)(ke),[n,a]=Object(d.useState)("/"),r=Object(d.useRef)(n);r.current=n;const i=Object(d.useMemo)(()=>{let e="";const t=n.split("/").filter(Boolean).map(t=>(e+="/"+t,{key:e,text:t,onClick:(e,t)=>{t&&a(t.key)}}));return t.unshift({key:"/",text:"/",onClick:()=>a("/")}),t[t.length-1].isCurrentItem=!0,t[t.length-1].onClick=void 0,t},[n]),[o,c]=Object(d.useState)([]),[l,h]=Object(d.useState)(!1),m=Object(d.useRef)(null),f=Object(d.useCallback)(async()=>{var t;if(c([]),!e)return void a("/");h(!0);const s=await e.sync();let i=[];const o=setInterval(()=>{c(i.slice())},1e3);try{let e=Date.now();for await(const t of s.iterate(n)){if(n!==r.current)break;if("."===t.name||".."===t.name)continue;i.push((l=t,{...l,key:l.name}));const a=Date.now();a-e>16&&(await Je(0),e=a)}c(i),null===(t=m.current)||void 0===t||t.scrollToIndex(0)}finally{n===r.current&&h(!1),clearInterval(o),s.dispose()}var l},[e,n]);Object(d.useEffect)(()=>{f()},[f]);const[p,g]=Object(d.useState)([]),[b,w]=Object(d.useState)("name"),[y,v]=Object(d.useState)(!1);Object(d.useEffect)(()=>{const e=o.slice();e.sort((e,t)=>{const n=e.type===re.File?1:0,a=t.type===re.File?1:0;let r;if(n!==a)r=n-a;else{const n=e[b],a=t[b];r=n===a?e.name<t.name?-1:1:n<a?-1:1}return y&&(r*=-1),r}),g(e)},[o,b,y]);const E=Object(d.useMemo)(()=>{const e=[{key:"type",name:"File Type",iconName:"Page",isIconOnly:!0,minWidth:20,maxWidth:20,isCollapsible:!0,onRender(e){switch(e.type){case re.Link:return u.a.createElement(xe.a,Object.assign({},Object(Fe.a)({size:20,type:ze.a.linkedFolder})));case re.Directory:return u.a.createElement(xe.a,Object.assign({},Object(Fe.a)({size:20,type:ze.a.folder})));case re.File:return u.a.createElement(xe.a,Object.assign({},Object(Fe.a)({size:20,extension:Ye(e.name)})));default:return u.a.createElement(xe.a,Object.assign({},Object(Fe.a)({size:20,extension:"txt"})))}}},{key:"name",name:"Name",minWidth:0,isRowHeader:!0,onRender:e=>u.a.createElement("span",{className:$e.name,"data-selection-invoke":!0},e.name)},{key:"mode",name:"Mode",minWidth:0,onRender:e=>`0${(e.mode>>6&4).toString(8)}${(e.mode>>3&4).toString(8)}${(4&e.mode).toString(8)}`},{key:"logicalSize",name:"Size",minWidth:0,onRender:e=>e.type===re.File?function(e){let t=0;for(;t<qe.length&&e>1024;)t+=1,e/=1024;return e.toLocaleString(void 0,{maximumFractionDigits:2})+qe[t]}(e.logicalSize):""},{key:"lastModifiedTime",name:"Last Modified Time",minWidth:150,onRender:e=>new Date(1e3*e.lastModifiedTime).toLocaleString()}];for(const t of e)t.onColumnClick=(e,t)=>{b===t.key?v(!y):(w(t.key),v(!1))},t.key===b&&(t.isSorted=!0,t.isSortedDescending=y);return e},[b,y]),[k,D]=Object(d.useState)(),O=Object(d.useCallback)(async t=>{const n=await e.sync();try{const e=Xe(n.receive(t)),a=new Response(e),r=await a.blob(),s=window.URL.createObjectURL(r);D(s)}finally{n.dispose()}},[e]),j=Object(d.useCallback)(()=>{D(void 0)},[]),S=Object(d.useCallback)(e=>{switch(e.type){case re.Link:case re.Directory:a(Qe.a.resolve(n,e.name));break;case re.File:switch(Ye(e.name)){case".jpg":case".png":case".svg":case".gif":O(Qe.a.resolve(n,e.name))}}},[n,O]),C=Object(Me.a)(()=>new _e.a),[A,x]=Object(d.useState)([]),[_,I]=Object(d.useState)(),U=Object(d.useCallback)((a,r,s)=>{if(!s)return!1;const i=C.getSelection();let o=[];return 0===i.length&&i[0].type===re.File&&o.push({key:"download",text:"Download",onClick:()=>((async()=>{const t=await e.sync();try{const e=Qe.a.resolve(n,i[0].name),a=Xe(t.receive(e)),r=He.a.createWriteStream(i[0].name,{size:i[0].size});await a.pipeTo(r)}finally{t.dispose()}})(),!1)}),o.push({key:"delete",text:"Delete",onClick:()=>((async()=>{try{for(const a of i){const r=await e.shell("rm","-rf",`"${Qe.a.resolve(n,a.name)}"`);if(r)return void t(r)}}catch(e){t(e.message)}finally{f()}})(),!1)}),!!o.length&&(x(o),I(s),!1)},[n,e]),L=Object(Ke.a)(()=>{I(void 0)});return u.a.createElement(Ie.a,{selection:C},e&&u.a.createElement(s.a,null,u.a.createElement(Ue.a,{items:i})),u.a.createElement(s.a,{grow:!0,styles:{root:{minHeight:0}}},u.a.createElement(Le.a,{componentRef:m,items:p,columns:E,setKey:n,selection:C,layoutMode:Pe.e.justified,enableShimmer:l&&0===o.length,onItemInvoked:S,onItemContextMenu:U,onRenderDetailsHeader:Ze,usePageCache:!0})),k&&u.a.createElement(Ne.a,null,u.a.createElement(Be.a,{onClick:j},u.a.createElement("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"}},u.a.createElement("img",{src:k,style:{maxWidth:"100%",maxHeight:"100%"}})))),u.a.createElement(Te.a,{items:A,hidden:!_,directionalHint:We.a.bottomLeftEdge,target:_,onDismiss:L}))}),tt=n("WDP9"),nt=n("2WvF"),at=n("/POA"),rt=n("R9As"),st=n("0fl0");n("q7KB");const it={position:"absolute",top:0,left:0,width:"100%",height:"100%",visibility:"hidden"};var ot=Ee("ResizeObserver",({onResize:e,style:t,children:n,...a})=>{const r=Object(d.useRef)(e);r.current=e;const s=Object(d.useCallback)(()=>{r.current()},[]),i=Object(d.useCallback)(e=>{e&&e.contentWindow.addEventListener("resize",s)},[]),o=u.a.useMemo(()=>t?t.position?t:{...t,position:"relative"}:{position:"relative"},[t]);return u.a.createElement("div",Object.assign({style:o},a),u.a.createElement("iframe",{ref:i,style:it}),n)});const ct={width:"100%",height:"100%"};var lt=Ee("Shell",({device:e})=>{const[t,n]=Object(d.useState)(""),a=Object(d.useRef)(),r=Object(d.useCallback)((e,t)=>{n(null!=t?t:""),t&&a.current.findNext(t,{incremental:!0})},[]),o=Object(d.useCallback)(()=>{a.current.findPrevious(t)},[t]),c=Object(d.useCallback)(()=>{a.current.findNext(t)},[t]),[l,h]=Object(d.useState)(),m=Object(d.useRef)(),f=Object(d.useCallback)(e=>{if(!e)return;const t=new at.Terminal({scrollback:9001}),n=new st.SearchAddon;a.current=n,t.loadAddon(n);const r=new rt.FitAddon;m.current=r,t.loadAddon(r),h(t),t.open(e),r.fit()},[]);Object(d.useEffect)(()=>()=>null==l?void 0:l.dispose(),[]),Object(d.useEffect)(()=>{if(e&&l)return(async()=>{const t=await e.shell(),n=new TextEncoder;l.onData(e=>{const{buffer:a}=n.encode(e);t.write(a)}),t.onData(e=>{l.write(new Uint8Array(e))})})(),()=>{l.reset(),l.clear()}},[e,l]);const p=Object(d.useCallback)(()=>{var e;null===(e=m.current)||void 0===e||e.fit()},[]);return u.a.createElement(u.a.Fragment,null,u.a.createElement(s.a,null,u.a.createElement(i.a,{horizontal:!0},u.a.createElement(s.a,{grow:!0},u.a.createElement(tt.a,{placeholder:"Find",value:t,onChange:r,onSearch:c})),u.a.createElement(s.a,null,u.a.createElement(nt.a,{disabled:!t,iconProps:{iconName:"ChevronUp"},onClick:o})),u.a.createElement(s.a,null,u.a.createElement(nt.a,{disabled:!t,iconProps:{iconName:"ChevronDown"},onClick:c})))),u.a.createElement(s.a,{grow:!0,styles:{root:{minHeight:0}}},u.a.createElement(ot,{style:ct,onResize:p},u.a.createElement("div",{ref:f,style:{height:"100%"}}))))}),dt=n("GIx+"),ut=n("iMux"),ht=n("CcL7"),mt=n("fGTi"),ft=Ee("TcpIp",({device:e})=>{const[t,n]=Object(d.useState)();Object(d.useEffect)(()=>{e||n(void 0)},[e]);const r=Object(d.useCallback)(async()=>{if(!e)return;const t=await e.getDaemonTcpAddresses();n(t)},[e]),[o,c]=Object(d.useState)("5555"),l=Object(mt.a)("tcpPort"),h=Object(d.useCallback)(async()=>{if(!e)return;const t=await e.setDaemonTcpPort(Number.parseInt(o,10));console.log(t)},[e,o]),m=Object(d.useCallback)(async()=>{if(!e)return;const t=await e.disableDaemonTcp();console.log(t)},[e]);return u.a.createElement(u.a.Fragment,null,u.a.createElement(s.a,null,u.a.createElement(dt.a,null,u.a.createElement(a.a,null,"Although WebADB can enable ADB over WiFi for you, it can't connect to your device wirelessly."))),u.a.createElement(s.a,null,u.a.createElement(dt.a,null,u.a.createElement(a.a,null,"Your device will disconnect after changing ADB over WiFi config."))),u.a.createElement(i.a,{horizontal:!0,verticalAlign:"center",tokens:{childrenGap:8}},u.a.createElement(s.a,null,u.a.createElement(g.a,{text:"Update Status",disabled:!e,onClick:r})),u.a.createElement(s.a,null,void 0!==t&&(0!==t.length?"Enabled at "+t.join(", "):"Disabled"))),u.a.createElement(i.a,{horizontal:!0,verticalAlign:"center",tokens:{childrenGap:8}},u.a.createElement(s.a,null,u.a.createElement(ut.a,{htmlFor:l},"Port: ")),u.a.createElement(s.a,null,u.a.createElement(ht.a,{id:l,width:300,disabled:!e,value:o,onChange:(e,t)=>c(t)})),u.a.createElement(s.a,null,u.a.createElement(g.a,{text:"Enable",disabled:!e,onClick:h}))),u.a.createElement(s.a,null,u.a.createElement(g.a,{text:"Disable",disabled:!e||void 0===t||0===t.length,onClick:m})))});Object(l.a)(),m.a.render(u.a.createElement(p.a,null,u.a.createElement(De,null,u.a.createElement((function(){const e=Object(f.e)(),[t,n]=Object(d.useState)(),l=Object(d.useMemo)(()=>{var e;return[{path:"/",exact:!0,name:"Introduction",children:u.a.createElement(u.a.Fragment,null,u.a.createElement(a.a,{block:!0},"This demo can connect to your Android devices using the"," ",u.a.createElement(r.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/USB",target:"_blank"},"WebUSB")," ","API."),u.a.createElement(a.a,{block:!0},"The latest version of Google Chrome (or Microsoft Edge) is recommended for best compatibility."),u.a.createElement(a.a,{block:!0,styles:{root:{fontWeight:"600"}}},"Windows user?"),u.a.createElement(a.a,{block:!0},"The experimental new backend is required. Enable from  "," ",u.a.createElement(r.a,{href:"chrome://flags/#new-usb-backend"},"chrome://flags/#new-usb-backend")),u.a.createElement(a.a,{block:!0,styles:{root:{fontWeight:"600"}}},'Got "Unable to claim interface"?'),u.a.createElement(a.a,{block:!0},"1. Make sure ADB server is not running (run `adb kill-server` to stop it).",u.a.createElement("br",null),"2. Make sure no other Android management tools are running"),u.a.createElement(a.a,{block:!0,styles:{root:{fontWeight:"600"}}},'Got "Access denied"?'),u.a.createElement(a.a,{block:!0},"If you have a Samsung device, it's caused by the custom driver. See "," ",u.a.createElement(r.a,{href:"https://bugs.chromium.org/p/chromium/issues/detail?id=1127206"},"https://bugs.chromium.org/p/chromium/issues/detail?id=1127206")))},{path:"/device-info",name:"Device Info",children:u.a.createElement(u.a.Fragment,null,u.a.createElement(s.a,null,"Product: ",null==t?void 0:t.product),u.a.createElement(s.a,null,"Model: ",null==t?void 0:t.model),u.a.createElement(s.a,null,"Device: ",null==t?void 0:t.device),u.a.createElement(s.a,null,"Features: ",null===(e=null==t?void 0:t.features)||void 0===e?void 0:e.join(",")))},{path:"/adb-over-wifi",name:"ADB over WiFi",children:u.a.createElement(ft,{device:t})},{path:"/shell",name:"Interactive Shell",children:u.a.createElement(lt,{device:t})},{path:"/file-manager",name:"File Manager",children:u.a.createElement(et,{device:t})}]},[t]);return u.a.createElement(i.a,{verticalFill:!0},u.a.createElement(s.a,{tokens:{padding:8}},u.a.createElement(a.a,{variant:"xxLarge"},"WebADB Demo")),u.a.createElement(s.a,null,u.a.createElement(Oe,{device:t,onDeviceChange:n})),u.a.createElement(s.a,null,u.a.createElement(o.a,null)),u.a.createElement(s.a,{grow:!0,styles:{root:{minHeight:0}}},u.a.createElement(i.a,{horizontal:!0,verticalFill:!0,tokens:{childrenGap:8}},u.a.createElement(s.a,null,u.a.createElement(c.a,{styles:{root:{width:250}},groups:[{links:l.map(e=>({key:e.path,name:e.name,url:"#"+e.path}))}],selectedKey:e.pathname})),u.a.createElement(s.a,{grow:!0,styles:{root:{minHeight:0,overflow:"hidden"}}},u.a.createElement(Ae,null,l.map(e=>u.a.createElement(Ce,{exact:e.exact,path:e.path},e.children)),u.a.createElement(f.a,{to:"/"}))))))}),null))),document.getElementById("container"))},p2bk:function(e,t,n){}});
//# sourceMappingURL=index.e2f4e43a94d06d08ac4e.js.map