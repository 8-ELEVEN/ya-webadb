(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[533],{7645:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/scrcpy",function(){return r(1945)}])},258:function(e,t,r){"use strict";r.d(t,{X:function(){return o}});var i=r(4471),n=r(3370);function o(){let[e,t]=(0,n.useState)(null);return(0,n.useEffect)(()=>{if(!e)return;let t=e.parentElement,r=t.style.flexGrow;return t.style.flexGrow="1",()=>{t.style.flexGrow=r}},[e]),(0,i.jsx)("div",{ref:t})}},1945:function(e,t,r){"use strict";let i,n,o;r.r(t),r.d(t,{default:function(){return tq}});var a,s,l,c,d,u,h,p,g,f,m,y,w,v,S,b,k,C,x,P,L,D,M,z,O=r(4471),N=r(6897),E=r(1012),_=r(2760),A=r(781),R=r(3945),I=r(8525),j=r(9142),F=r(1710),T=r(7104);function K(e){return e.toString(16).padStart(2,"0").toUpperCase()}class V{maxProfile=void 0;maxLevel=void 0;_writable;get writable(){return this._writable}_renderer;get renderer(){return this._renderer}_frameRendered=0;get frameRendered(){return this._frameRendered}_frameSkipped=0;get frameSkipped(){return this._frameSkipped}context;decoder;currentFrameRendered=!1;animationFrameId=0;constructor(){this._renderer=document.createElement("canvas"),this.context=this._renderer.getContext("2d"),this.decoder=new VideoDecoder({output:e=>{this.currentFrameRendered?this._frameSkipped+=1:(this.currentFrameRendered=!0,this._frameRendered+=1),this.context.drawImage(e,0,0),e.close()},error(e){}}),this._writable=new T.Vj({write:e=>{switch(e.type){case"configuration":this.configure(e.data);break;case"frame":this.decoder.decode(new EncodedVideoChunk({type:!1===e.keyframe?"delta":"key",timestamp:0,data:e.data}))}}}),this.onFramePresented()}onFramePresented=()=>{this.currentFrameRendered=!1,this.animationFrameId=requestAnimationFrame(this.onFramePresented)};configure(e){let{profileIndex:t,constraintSet:r,levelIndex:i}=e;this._renderer.width=e.croppedWidth,this._renderer.height=e.croppedHeight;let n=`avc1.${[t,r,i].map(K).join("")}`;this.decoder.configure({codec:n,optimizeForLatency:!0})}dispose(){cancelAnimationFrame(this.animationFrameId),this.decoder.close()}}var H=r(7532),U=r(941),B=r(9530),W=r.n(B),G=r(3370),J=r(1114),X=r(7836),Y=r(2119),q=r(228),Z=r(6789);class ${adb;options;constructor(e,t){this.adb=e,this.options=t}initialize(){}dispose(){}}class Q extends ${_disposed=!1;connect(){return this.adb.createSocket("localabstract:scrcpy")}async connectAndRetry(){for(let e=0;!this._disposed&&e<100;e+=1)try{return await this.connect()}catch(e){await (0,Z.gw)(100)}throw Error("Can't connect to server after 100 retries")}async connectVideoStream(){let{readable:e}=await this.connectAndRetry();if(this.options.sendDummyByte){let t=e.getReader(),{done:r,value:i}=await t.read();if(r||1!==i.byteLength||0!==i[0])throw Error("Unexpected response from server");t.releaseLock()}return e}async getStreams(){let e;let t=await this.connectVideoStream();if(this.options.control&&(e=await this.connectAndRetry()),this.options.sendDeviceMeta){let e=t.getReader(),{done:r,value:i}=await e.read();if(r||68!==i.byteLength)throw Error("Unexpected response from server");e.releaseLock()}return[t,e]}dispose(){super.dispose(),this._disposed=!0}}class ee extends ${streams;address;async initialize(){try{await this.adb.reverse.remove("localabstract:scrcpy")}catch(e){if(e instanceof q.Pg)throw e}let e=new T.GJ;this.streams=e.readable.getReader();let t=e.writable.getWriter();this.address=await this.adb.reverse.add("localabstract:scrcpy","tcp:27183",e=>(t.write(e),!0))}async accept(){return(await this.streams.read()).value}async getStreams(){let e;let{readable:t}=await this.accept();if(this.options.control&&(e=await this.accept()),this.options.sendDeviceMeta){let e=t.getReader(),{done:r,value:i}=await e.read();if(r||68!==i.byteLength)throw Error("Unexpected response from server");e.releaseLock()}return[t,e]}dispose(){this.adb.reverse.remove(this.address).catch(e=>{})}}class et{raw;get value(){return this.raw.value}set value(e){this.raw.value=e}constructor(e){this.raw=e}getDefaultValue(){return this.raw.getDefaultValue()}formatServerArguments(){return this.raw.formatServerArguments()}getOutputEncoderNameRegex(){return this.raw.getOutputEncoderNameRegex()}createVideoStreamTransformer(){return this.raw.createVideoStreamTransformer()}getControlMessageTypes(){return this.raw.getControlMessageTypes()}serializeBackOrScreenOnControlMessage(e){return this.raw.serializeBackOrScreenOnControlMessage(e)}serializeSetClipboardControlMessage(e){return this.raw.serializeSetClipboardControlMessage(e)}getScrollController(){return this.raw.getScrollController()}}class er extends et{createConnection(e){let t={control:!0,sendDummyByte:!0,sendDeviceMeta:!0};return this.value.tunnelForward?new Q(e,t):new ee(e,t)}}class ei extends er{createConnection(e){let t={...this.getDefaultValue(),...this.value};return this.value.tunnelForward?new Q(e,t):new ee(e,t)}}var en=r(9229);function eo(e,t,r){return e<t?t:e>r?r:e}(a=w=w||(w={}))[a.InjectKeyCode=0]="InjectKeyCode",a[a.InjectText=1]="InjectText",a[a.InjectTouch=2]="InjectTouch",a[a.InjectScroll=3]="InjectScroll",a[a.BackOrScreenOn=4]="BackOrScreenOn",a[a.ExpandNotificationPanel=5]="ExpandNotificationPanel",a[a.ExpandSettingPanel=6]="ExpandSettingPanel",a[a.CollapseNotificationPanel=7]="CollapseNotificationPanel",a[a.GetClipboard=8]="GetClipboard",a[a.SetClipboard=9]="SetClipboard",a[a.SetScreenPowerMode=10]="SetScreenPowerMode",a[a.RotateDevice=11]="RotateDevice",(s=v=v||(v={}))[s.Down=0]="Down",s[s.Up=1]="Up",s[s.Move=2]="Move",s[s.Cancel=3]="Cancel",s[s.Outside=4]="Outside",s[s.PointerDown=5]="PointerDown",s[s.PointerUp=6]="PointerUp",s[s.HoverMove=7]="HoverMove",s[s.Scroll=8]="Scroll",s[s.HoverEnter=9]="HoverEnter",s[s.HoverExit=10]="HoverExit",s[s.ButtonPress=11]="ButtonPress",s[s.ButtonRelease=12]="ButtonRelease",(l=S=S||(S={})).Mouse=BigInt(-1),l.Finger=BigInt(-2),l.VirtualMouse=BigInt(-3),l.VirtualFinger=BigInt(-4);let ea=new en.Pl({size:2,signed:!1,deserialize(e,t){let r=en.ek.Uint16.deserialize(e,t);return 65535===r?1:r/65536},serialize(e,t,r,i){r=1===(r=eo(r,-1,1))?65535:65536*r,en.ek.Uint16.serialize(e,t,r,i)}}),es=new en.ZP().uint8("type",w.InjectTouch).uint8("action",(0,en.W$)()).uint64("pointerId").uint32("pointerX").uint32("pointerY").uint16("screenWidth").uint16("screenHeight").field("pressure",ea).uint32("buttons");class el{lastHoverMessage;process(e){let t=[];return this.lastHoverMessage&&this.lastHoverMessage.pointerId!==e.pointerId&&(t.push({...this.lastHoverMessage,action:v.Up}),this.lastHoverMessage=void 0),e.action===v.HoverMove&&(this.lastHoverMessage=e),e.type=w.InjectTouch,t.push(e),t}}(c=b=b||(b={}))[c.Down=0]="Down",c[c.Up=1]="Up",(d=k=k||(k={}))[d.AltOn=2]="AltOn",d[d.AltLeftOn=16]="AltLeftOn",d[d.AltRightOn=32]="AltRightOn",d[d.ShiftOn=1]="ShiftOn",d[d.ShiftLeftOn=64]="ShiftLeftOn",d[d.ShiftRightOn=128]="ShiftRightOn",d[d.CtrlOn=4096]="CtrlOn",d[d.CtrlLeftOn=8192]="CtrlLeftOn",d[d.CtrlRightOn=16384]="CtrlRightOn",d[d.MetaOn=65536]="MetaOn",d[d.MetaLeftOn=131072]="MetaLeftOn",d[d.MetaRightOn=262144]="MetaRightOn",d[d.CapsLockOn=1048576]="CapsLockOn",d[d.NumLockOn=2097152]="NumLockOn",d[d.ScrollLockOn=4194304]="ScrollLockOn",(u=C=C||(C={}))[u.AndroidHome=3]="AndroidHome",u[u.AndroidBack=4]="AndroidBack",u[u.AndroidCall=5]="AndroidCall",u[u.AndroidEndCall=6]="AndroidEndCall",u[u.Digit0=7]="Digit0",u[u.Digit1=8]="Digit1",u[u.Digit2=9]="Digit2",u[u.Digit3=10]="Digit3",u[u.Digit4=11]="Digit4",u[u.Digit5=12]="Digit5",u[u.Digit6=13]="Digit6",u[u.Digit7=14]="Digit7",u[u.Digit8=15]="Digit8",u[u.Digit9=16]="Digit9",u[u.Star=17]="Star",u[u.Pound=18]="Pound",u[u.ArrowUp=19]="ArrowUp",u[u.ArrowDown=20]="ArrowDown",u[u.ArrowLeft=21]="ArrowLeft",u[u.ArrowRight=22]="ArrowRight",u[u.AndroidDPadCenter=23]="AndroidDPadCenter",u[u.VolumeUp=24]="VolumeUp",u[u.VolumeDown=25]="VolumeDown",u[u.Power=26]="Power",u[u.AndroidCamera=27]="AndroidCamera",u[u.Clear=28]="Clear",u[u.KeyA=29]="KeyA",u[u.KeyB=30]="KeyB",u[u.KeyC=31]="KeyC",u[u.KeyD=32]="KeyD",u[u.KeyE=33]="KeyE",u[u.KeyF=34]="KeyF",u[u.KeyG=35]="KeyG",u[u.KeyH=36]="KeyH",u[u.KeyI=37]="KeyI",u[u.KeyJ=38]="KeyJ",u[u.KeyK=39]="KeyK",u[u.KeyL=40]="KeyL",u[u.KeyM=41]="KeyM",u[u.KeyN=42]="KeyN",u[u.KeyO=43]="KeyO",u[u.KeyP=44]="KeyP",u[u.KeyQ=45]="KeyQ",u[u.KeyR=46]="KeyR",u[u.KeyS=47]="KeyS",u[u.KeyT=48]="KeyT",u[u.KeyU=49]="KeyU",u[u.KeyV=50]="KeyV",u[u.KeyW=51]="KeyW",u[u.KeyX=52]="KeyX",u[u.KeyY=53]="KeyY",u[u.KeyZ=54]="KeyZ",u[u.Comma=55]="Comma",u[u.Period=56]="Period",u[u.AltLeft=57]="AltLeft",u[u.AltRight=58]="AltRight",u[u.ShiftLeft=59]="ShiftLeft",u[u.ShiftRight=60]="ShiftRight",u[u.Tab=61]="Tab",u[u.Space=62]="Space",u[u.AndroidSymbol=63]="AndroidSymbol",u[u.AndroidExplorer=64]="AndroidExplorer",u[u.AndroidEnvelope=65]="AndroidEnvelope",u[u.Enter=66]="Enter",u[u.Backspace=67]="Backspace",u[u.Backquote=68]="Backquote",u[u.Minus=69]="Minus",u[u.Equal=70]="Equal",u[u.BracketLeft=71]="BracketLeft",u[u.BracketRight=72]="BracketRight",u[u.Backslash=73]="Backslash",u[u.Semicolon=74]="Semicolon",u[u.Quote=75]="Quote",u[u.Slash=76]="Slash",u[u.At=77]="At",u[u.AndroidNum=78]="AndroidNum",u[u.AndroidHeadsetHook=79]="AndroidHeadsetHook",u[u.AndroidFocus=80]="AndroidFocus",u[u.Plus=81]="Plus",u[u.ContextMenu=82]="ContextMenu",u[u.AndroidNotification=83]="AndroidNotification",u[u.AndroidSearch=84]="AndroidSearch",u[u.PageUp=92]="PageUp",u[u.PageDown=93]="PageDown",u[u.Escape=111]="Escape",u[u.Delete=112]="Delete",u[u.ControlLeft=113]="ControlLeft",u[u.ControlRight=114]="ControlRight",u[u.CapsLock=115]="CapsLock",u[u.ScrollLock=116]="ScrollLock",u[u.MetaLeft=117]="MetaLeft",u[u.MetaRight=118]="MetaRight",u[u.AndroidFunction=119]="AndroidFunction",u[u.PrintScreen=120]="PrintScreen",u[u.Pause=121]="Pause",u[u.Home=122]="Home",u[u.End=123]="End",u[u.Insert=124]="Insert",u[u.AndroidForward=125]="AndroidForward",u[u.F1=131]="F1",u[u.F2=132]="F2",u[u.F3=133]="F3",u[u.F4=134]="F4",u[u.F5=135]="F5",u[u.F6=136]="F6",u[u.F7=137]="F7",u[u.F8=138]="F8",u[u.F9=139]="F9",u[u.F10=140]="F10",u[u.F11=141]="F11",u[u.F12=142]="F12",u[u.NumLock=143]="NumLock",u[u.Numpad0=144]="Numpad0",u[u.Numpad1=145]="Numpad1",u[u.Numpad2=146]="Numpad2",u[u.Numpad3=147]="Numpad3",u[u.Numpad4=148]="Numpad4",u[u.Numpad5=149]="Numpad5",u[u.Numpad6=150]="Numpad6",u[u.Numpad7=151]="Numpad7",u[u.Numpad8=152]="Numpad8",u[u.Numpad9=153]="Numpad9",u[u.NumpadDivide=154]="NumpadDivide",u[u.NumpadMultiply=155]="NumpadMultiply",u[u.NumpadSubtract=156]="NumpadSubtract",u[u.NumpadAdd=157]="NumpadAdd",u[u.NumpadDecimal=158]="NumpadDecimal",u[u.NumpadComma=159]="NumpadComma",u[u.NumpadEnter=160]="NumpadEnter",u[u.NumpadEquals=161]="NumpadEquals",u[u.NumpadLeftParen=162]="NumpadLeftParen",u[u.NumpadRightParen=163]="NumpadRightParen",u[u.VolumeMute=164]="VolumeMute",u[u.AndroidAppSwitch=187]="AndroidAppSwitch",u[u.AndroidCut=277]="AndroidCut",u[u.AndroidCopy=278]="AndroidCopy",u[u.AndroidPaste=279]="AndroidPaste";let ec=new en.ZP().uint8("type",w.InjectKeyCode).uint8("action",(0,en.W$)()).uint32("keyCode").uint32("repeat").uint32("metaState"),ed=new en.ZP().uint8("type",w.InjectText).uint32("length").string("text",{lengthField:"length"}),eu=new en.ZP().uint8("type",w.RotateDevice);(h=x=x||(x={}))[h.Off=0]="Off",h[h.Normal=2]="Normal";let eh=new en.ZP().uint8("type",w.SetScreenPowerMode).uint8("mode",(0,en.W$)());class ep{options;types;writer;scrollController;constructor(e,t){this.writer=e.getWriter(),this.options=t,this.types=t.getControlMessageTypes(),this.scrollController=t.getScrollController()}getActualMessageType(e){let t=this.types.indexOf(e);if(-1===t)throw Error("Not supported");return t}addMessageType(e,t){return e.type=this.getActualMessageType(t),e}async write(e){await T.s5.write(this.writer,e)}injectKeyCode(e){return this.write(ec.serialize(this.addMessageType(e,w.InjectKeyCode)))}injectText(e){return this.write(ed.serialize({text:e,type:this.getActualMessageType(w.InjectText)}))}injectTouch(e){return this.write(es.serialize(this.addMessageType(e,w.InjectTouch)))}injectScroll(e){let t=this.scrollController.serializeScrollMessage(this.addMessageType(e,w.InjectScroll));if(t)return this.write(t)}async backOrScreenOn(e){let t=this.options.serializeBackOrScreenOnControlMessage({action:e,type:this.getActualMessageType(w.BackOrScreenOn)});if(t)return await this.write(t)}setScreenPowerMode(e){return this.write(eh.serialize({mode:e,type:this.getActualMessageType(w.SetScreenPowerMode)}))}rotateDevice(){return this.write(eu.serialize({type:this.getActualMessageType(w.RotateDevice)}))}close(){return this.writer.close()}}(p=P=P||(P={}))[p.Clipboard=0]="Clipboard",p[p.AckClipboard=1]="AckClipboard";let eg=new en.ZP().uint64("sequence").extra({type:P.AckClipboard}),ef=new en.ZP().uint32("length").string("content",{lengthField:"length"}).extra({type:P.Clipboard});class em extends T.pC{constructor(){super(async e=>{let t=await e.read(1);switch(t[0]){case P.Clipboard:return await ef.deserialize(e);case P.AckClipboard:return await eg.deserialize(e);default:throw Error("unknown control message type")}})}}let ey={repeatPreviousFrameAfter:"long",maxPtsGapToEncoder:"long"};class ew{value;constructor(e={}){this.value=e}toOptionValue(){let e=Object.entries(this.value).filter(([,e])=>void 0!==e);if(0!==e.length)return e.map(([e,t])=>{let r=ey[e];return`${e.replace(/([A-Z])/g,"-$1").toLowerCase()}${r?`:${r}`:""}=${t}`}).join(",")}}class ev{buffer;bytePosition=0;bitPosition=0;constructor(e){this.buffer=e}read(e){let t=0;for(let r=0;r<e;r+=1)t=t<<1|this.next();return t}next(){let e=this.buffer[this.bytePosition]>>7-this.bitPosition&1;return this.bitPosition+=1,8===this.bitPosition&&(this.bytePosition+=1,this.bitPosition=0),e}decodeExponentialGolombNumber(){let e=0;for(;0===this.next();)e+=1;return 0===e?0:(1<<e|this.read(e))-1}}function*eS(e){let t=-1,r=0,i=!1;for(let n=0;n<e.length;n+=1){let o=e[n];if(i){if(o>3)throw Error("Invalid data");i=!1;continue}if(0===o){r+=1;continue}let a=r;if(r=0,-1===t){if(a>=2&&1===o){t=n+1;continue}throw Error("Invalid data")}if(!(a<2)){if(1===o){yield e.subarray(t,n-a),t=n+1;continue}if(a>2)throw Error("Invalid data");switch(o){case 2:throw Error("Invalid data");case 3:i=!0}}}if(i)throw Error("Invalid data");yield e.subarray(t,e.length)}let eb="/data/local/tmp/scrcpy-server.jar";function ek(e,t){var r;return"object"==typeof(r=e)&&null!==r&&"toOptionValue"in r&&"function"==typeof r.toOptionValue&&(e=e.toOptionValue()),void 0===e?t:String(e)}let eC=new en.ZP().uint8("type",w.InjectScroll).uint32("pointerX").uint32("pointerY").uint16("screenWidth").uint16("screenHeight").int32("scrollX").int32("scrollY");class ex{accumulatedX=0;accumulatedY=0;processMessage(e){this.accumulatedX+=e.scrollX,this.accumulatedY+=e.scrollY;let t=0,r=0;if(this.accumulatedX>=1?(t=1,this.accumulatedX=0):this.accumulatedX<=-1&&(t=-1,this.accumulatedX=0),this.accumulatedY>=1?(r=1,this.accumulatedY=0):this.accumulatedY<=-1&&(r=-1,this.accumulatedY=0),0!==t||0!==r)return e.scrollX=t,e.scrollY=r,e}serializeScrollMessage(e){let t=this.processMessage(e);if(t)return eC.serialize(t)}}(g=L=L||(L={})).Verbose="verbose",g.Debug="debug",g.Info="info",g.Warn="warn",g.Error="error",(f=D=D||(D={}))[f.Initial=-2]="Initial",f[f.Unlocked=-1]="Unlocked",f[f.Portrait=0]="Portrait",f[f.Landscape=1]="Landscape",f[f.PortraitFlipped=2]="PortraitFlipped",f[f.LandscapeFlipped=3]="LandscapeFlipped";let eP=new en.ZP().uint64("pts").uint32("size").uint8Array("data",{lengthField:"size"}),eL=BigInt(1)<<BigInt(63),eD=new en.ZP().uint8("type",w.BackOrScreenOn),eM=new en.ZP().uint8("type",w.SetClipboard).uint32("length").string("content",{lengthField:"length"});class ez{value;constructor(e){new.target===ez&&e.logLevel===L.Verbose&&(e.logLevel=L.Debug),new.target===ez&&e.lockVideoOrientation===D.Initial&&(e.lockVideoOrientation=D.Unlocked),this.value=e}getArgumentOrder(){return["logLevel","maxSize","bitRate","maxFps","lockVideoOrientation","tunnelForward","crop","sendFrameMeta","control","displayId","showTouches","stayAwake","codecOptions","encoderName"]}getDefaultValue(){return{logLevel:L.Debug,maxSize:0,bitRate:8e6,maxFps:0,lockVideoOrientation:D.Unlocked,tunnelForward:!1,crop:"-",sendFrameMeta:!0,control:!0,displayId:0,showTouches:!1,stayAwake:!1,codecOptions:new ew({}),encoderName:"-"}}formatServerArguments(){let e=this.getDefaultValue();return this.getArgumentOrder().map(t=>ek(this.value[t]||e[t],"-"))}getOutputEncoderNameRegex(){return/\s+scrcpy --encoder-name '(.*?)'/}createVideoStreamTransformer(){let e;if(!1===this.value.sendFrameMeta)return new T.GJ({transform(e,t){t.enqueue({type:"frame",data:e})}});let t=new T.gL(eP);return{writable:t.writable,readable:t.readable.pipeThrough(new T.GJ({transform(t,r){let i;if(t.pts===eL){let{sequenceParameterSet:i,pictureParameterSet:n}=function(e){let t,r;for(let i of eS(e)){let e=31&i[0];switch(e){case 7:if(t=i,r)return{sequenceParameterSet:t,pictureParameterSet:r};break;case 8:if(r=i,t)return{sequenceParameterSet:t,pictureParameterSet:r}}}throw Error("Invalid data")}(t.data),{profile_idc:o,constraint_set:a,level_idc:s,pic_width_in_mbs_minus1:l,pic_height_in_map_units_minus1:c,frame_mbs_only_flag:d,frame_crop_left_offset:u,frame_crop_right_offset:h,frame_crop_top_offset:p,frame_crop_bottom_offset:g}=function(e){let t,r,i,n;let o=new ev(e);if(0!==o.next())throw Error("Invalid data");let a=o.read(2),s=o.read(5);if(7!==s||0===a)throw Error("Invalid data");let l=o.read(8),c=o.read(8),d=new ev(new Uint8Array([c])),u=!!d.next(),h=!!d.next(),p=!!d.next(),g=!!d.next(),f=!!d.next(),m=!!d.next();if(0!==d.read(2))throw Error("Invalid data");let y=o.read(8),w=o.decodeExponentialGolombNumber();if(100===l||110===l||122===l||244===l||44===l||83===l||86===l||118===l||128===l||138===l||139===l||134===l){let e=o.decodeExponentialGolombNumber();3===e&&o.next(),o.decodeExponentialGolombNumber(),o.decodeExponentialGolombNumber(),o.next();let t=!!o.next();if(t){let t=[];for(let r=0;r<(3!==e?8:12);r+=1)t[r]=!!o.next(),t[r]}}o.decodeExponentialGolombNumber();let v=o.decodeExponentialGolombNumber();if(0===v)o.decodeExponentialGolombNumber();else if(1===v){o.next(),o.decodeExponentialGolombNumber(),o.decodeExponentialGolombNumber();let e=o.decodeExponentialGolombNumber(),t=[];for(let r=0;r<e;r+=1)t[r]=o.decodeExponentialGolombNumber()}o.decodeExponentialGolombNumber(),o.next();let S=o.decodeExponentialGolombNumber(),b=o.decodeExponentialGolombNumber(),k=o.next();k||o.next(),o.next();let C=!!o.next();return C?(t=o.decodeExponentialGolombNumber(),r=o.decodeExponentialGolombNumber(),i=o.decodeExponentialGolombNumber(),n=o.decodeExponentialGolombNumber()):(t=0,r=0,i=0,n=0),o.next(),{profile_idc:l,constraint_set:c,constraint_set0_flag:u,constraint_set1_flag:h,constraint_set2_flag:p,constraint_set3_flag:g,constraint_set4_flag:f,constraint_set5_flag:m,level_idc:y,seq_parameter_set_id:w,pic_width_in_mbs_minus1:S,pic_height_in_map_units_minus1:b,frame_mbs_only_flag:k,frame_cropping_flag:C,frame_crop_left_offset:t,frame_crop_right_offset:r,frame_crop_top_offset:i,frame_crop_bottom_offset:n}}(function(e){let t;let r=0,i=0,n=!1,o=0;e:for(;o<e.length;o+=1){let a=e[o];if(0===a){i+=1;continue}let s=i;if(i=0,!(s<2)){if(1===a||s>2)throw Error("Invalid data");switch(a){case 2:throw Error("Invalid data");case 3:n=!0,(t=new Uint8Array(e.length-1)).set(e.subarray(0,o-s)),r=o-s+1;break e}}}if(!t)return e;for(;o<e.length;o+=1){let a=e[o];if(t[r]=a,r+=1,n){if(a>3)throw Error("Invalid data");n=!1;continue}if(0===a){i+=1;continue}let s=i;if(i=0,!(s<2)){if(1===a||s>2)throw Error("Invalid data");switch(a){case 2:throw Error("Invalid data");case 3:n=!0,r-=1}}}return t.subarray(0,r)}(i)),f=(l+1)*16,m=(c+1)*(2-d)*16,y=2*u,w=2*h,v=2*p,S=2*g;e=t.data,r.enqueue({type:"configuration",pictureParameterSet:n,sequenceParameterSet:i,data:{profileIndex:o,constraintSet:a,levelIndex:s,encodedWidth:f,encodedHeight:m,cropLeft:y,cropRight:w,cropTop:v,cropBottom:S,croppedWidth:f-y-w,croppedHeight:m-v-S}});return}e?((i=new Uint8Array(e.byteLength+t.data.byteLength)).set(e),i.set(t.data,e.byteLength),e=void 0):i=t.data,r.enqueue({type:"frame",pts:t.pts,data:i})}}))}}getControlMessageTypes(){return[w.InjectKeyCode,w.InjectText,w.InjectTouch,w.InjectScroll,w.BackOrScreenOn,w.ExpandNotificationPanel,w.CollapseNotificationPanel,w.GetClipboard,w.SetClipboard,w.SetScreenPowerMode,w.RotateDevice]}serializeBackOrScreenOnControlMessage(e){if(e.action===b.Down)return eD.serialize(e)}serializeSetClipboardControlMessage(e){return eM.serialize(e)}getScrollController(){return new ex}}let eO=new en.ZP().fields(eD).uint8("action",(0,en.W$)());class eN extends ez{constructor(e){super(e)}getArgumentOrder(){return super.getArgumentOrder().concat(["powerOffOnClose"])}getDefaultValue(){return{...super.getDefaultValue(),powerOffOnClose:!1}}getOutputEncoderNameRegex(){return/\s+scrcpy --encoder '(.*?)'/}getControlMessageTypes(){let e=super.getControlMessageTypes();return e.splice(6,0,w.ExpandSettingPanel),e}serializeBackOrScreenOnControlMessage(e){return eO.serialize(e)}}let eE=new en.ZP().uint8("type",w.SetClipboard).uint64("sequence").int8("paste").uint32("length").string("content",{lengthField:"length"});class e_ extends eN{constructor(e){super(e)}getDefaultValue(){return{...super.getDefaultValue(),clipboardAutosync:!0}}formatServerArguments(){return Object.entries(this.value).map(([e,t])=>[e,ek(t,void 0)]).filter(e=>void 0!==e[1]).map(([e,t])=>`${e.replace(/([A-Z])/g,"_$1").toLowerCase()}=${t}`)}serializeSetClipboardControlMessage(e){return eE.serialize(e)}}let eA=new en.ZP().fields(eC).int32("buttons");class eR extends ex{serializeScrollMessage(e){let t=this.processMessage(e);if(t)return eA.serialize(t)}}class eI extends e_{constructor(e){e.rawVideoStream&&(e.sendDeviceMeta=!1,e.sendFrameMeta=!1,e.sendDummyByte=!1),super(e)}getDefaultValue(){return{...super.getDefaultValue(),downsizeOnError:!0,sendDeviceMeta:!0,sendDummyByte:!0,rawVideoStream:!1}}getScrollController(){return new eR}}let ej=BigInt(1)<<BigInt(62);class eF extends eI{constructor(e){super(e)}getDefaultValue(){return{...super.getDefaultValue(),cleanup:!0}}createVideoStreamTransformer(){let e=super.createVideoStreamTransformer();return{writable:e.writable,readable:e.readable.pipeThrough(new T.GJ({transform(e,t){if("frame"!==e.type){t.enqueue(e);return}void 0!==e.pts&&e.pts&ej&&(e.keyframe=!0,e.pts&=~ej),t.enqueue(e)}}))}}}class eT extends eF{constructor(e){super(e)}getDefaultValue(){return{...super.getDefaultValue(),powerOn:!0}}}let eK=new en.Pl({size:2,signed:!0,deserialize(e,t){let r=en.ek.Int16.deserialize(e,t);return 32767===r?1:r/32768},serialize(e,t,r,i){r=1===(r=eo(r,-1,1))?32767:32768*r,en.ek.Int16.serialize(e,t,r,i)}}),eV=new en.ZP().uint8("type",w.InjectScroll).uint32("pointerX").uint32("pointerY").uint16("screenWidth").uint16("screenHeight").field("scrollX",eK).field("scrollY",eK).int32("buttons");class eH{serializeScrollMessage(e){return eV.serialize(e)}}class eU extends eT{getScrollController(){return new eH}}class eB extends Error{output;constructor(e){super("scrcpy server exited prematurely"),this.output=e}}class eW{static async pushServer(e,t,r=eb){let i=await e.sync();try{await i.write({filename:r,file:t})}finally{await i.dispose()}}static async start(e,t,r,i){let n,o;try{try{n=i.createConnection(e),await n.initialize()}catch(t){if(t instanceof q.Pg)i.value.tunnelForward=!0,n=i.createConnection(e),await n.initialize();else throw n=void 0,t}o=await e.subprocess.spawn([`CLASSPATH=${t}`,"app_process","/","com.genymobile.scrcpy.Server",r,...i.formatServerArguments()],{protocols:[q.vf]});let a=o.stdout.pipeThrough(new T.xU).pipeThrough(new T.Jb("\n")),s=[],l=new T.HS,c=a.pipeTo(new T.Vj({write(e){s.push(e)}}),{signal:l.signal,preventCancel:!0}).catch(e=>{}),d=await Promise.race([o.exit,n.getStreams()]);if("number"==typeof d)throw new eB(s);l.abort(),await c;let[u,h]=d;return new eW(i,o,function(...e){return new T.Oi(async t=>{for(let r of e)await r.pipeTo(new T.Vj({async write(e){await t.enqueue(e)}}))})}(new T.Oi(async e=>{for(let t of s)await e.enqueue(t)}),a),u,h)}catch(e){throw await o?.kill(),e}finally{n?.dispose()}}static async getEncoders(e,t,r,i){Object.assign(i.value,{encoderName:"_",control:!1,sendDeviceMeta:!1,sendDummyByte:!1});let n=await eW.start(e,t,r,i),o=i.getOutputEncoderNameRegex(),a=[];return await n.stdout.pipeTo(new T.Vj({write(e){let t=e.match(o);t&&a.push(t[1])}})),a}static async getDisplays(e,t,r,i){Object.assign(i.value,{displayId:-1,control:!1,sendDeviceMeta:!1,sendDummyByte:!1});try{await eW.start(e,t,r,i)}catch(e){if(e instanceof eB){let t=/\s+scrcpy --display (\d+)/,r=[];for(let i of e.output){let e=i.match(t);e&&r.push(Number.parseInt(e[1],10))}return r}}throw Error("failed to get displays")}process;_stdout;get stdout(){return this._stdout}get exit(){return this.process.exit}_screenWidth;get screenWidth(){return this._screenWidth}_screenHeight;get screenHeight(){return this._screenHeight}_videoStream;get videoStream(){return this._videoStream}_controlMessageSerializer;get controlMessageSerializer(){return this._controlMessageSerializer}_deviceMessageStream;get deviceMessageStream(){return this._deviceMessageStream}constructor(e,t,r,i,n){this.process=t,this._stdout=r,this._videoStream=i.pipeThrough(e.createVideoStreamTransformer()).pipeThrough(new T.N7(e=>{"configuration"===e.type&&(this._screenWidth=e.data.croppedWidth,this._screenHeight=e.data.croppedHeight)})),n&&(this._controlMessageSerializer=new ep(n.writable,e),this._deviceMessageStream=n.readable.pipeThrough(new em))}async close(){await this.process.kill()}}(m=M=M||(M={}))[m.Baseline=1]="Baseline",m[m.Main=2]="Main",m[m.Extended=4]="Extended",m[m.High=8]="High",m[m.High10=16]="High10",m[m.High422=32]="High422",m[m.High444=64]="High444",m[m.ConstrainedBaseline=65536]="ConstrainedBaseline",m[m.ConstrainedHigh=524288]="ConstrainedHigh",(y=z=z||(z={}))[y.Level1=1]="Level1",y[y.Level1b=2]="Level1b",y[y.Level11=4]="Level11",y[y.Level12=8]="Level12",y[y.Level13=16]="Level13",y[y.Level2=32]="Level2",y[y.Level21=64]="Level21",y[y.Level22=128]="Level22",y[y.Level3=256]="Level3",y[y.Level31=512]="Level31",y[y.Level32=1024]="Level32",y[y.Level4=2048]="Level4",y[y.Level41=4096]="Level41",y[y.Level42=8192]="Level42",y[y.Level5=16384]="Level5",y[y.Level51=32768]="Level51",y[y.Level52=65536]="Level52",y[y.Level6=131072]="Level6",y[y.Level61=262144]="Level61",y[y.Level62=524288]="Level62";var eG=r(2575),eJ=r(2680),eX=r(258),eY=r(2549),eq=r(4874),eZ=r.n(eq);class e$ extends T.N7{appendFrame(e){let t=Number(e.pts);-1===this.firstTimestamp?(this.firstTimestamp=t,t=0):t-=this.firstTimestamp;let r=function(e){let t=[],r=0;for(let i of eS(e))t.push(i),r+=i.byteLength+4;let i=new Uint8Array(r),n=0;for(let e of t)i[n]=e.byteLength>>24,i[n+1]=e.byteLength>>16,i[n+2]=e.byteLength>>8,i[n+3]=255&e.byteLength,i.set(e,n+4),n+=4+e.byteLength;return i}(e.data);this.muxer.addVideoChunkRaw(r,e.keyframe?"key":"delta",t,this.configurationWritten?void 0:{decoderConfig:{codec:"",description:this.avcConfiguration}}),this.configurationWritten=!0}start(){if(this.running=!0,this.muxer=new(eZ())({target:"buffer",video:{codec:"V_MPEG4/ISO/AVC",width:this.width,height:this.height}}),this.framesFromKeyframe.length>0)for(let e of this.framesFromKeyframe)this.appendFrame(e)}stop(){if(!this.muxer)return;let e=this.muxer.finalize(),t=new Date,r=(0,eJ.yH)("Recording ".concat(t.getFullYear(),"-").concat((t.getMonth()+1).toString().padStart(2,"0"),"-").concat(t.getDate().toString().padStart(2,"0")," ").concat(t.getHours().toString().padStart(2,"0"),"-").concat(t.getMinutes().toString().padStart(2,"0"),"-").concat(t.getSeconds().toString().padStart(2,"0"),".webm")),i=r.getWriter();i.write(new Uint8Array(e)),i.close(),this.muxer=void 0,this.configurationWritten=!1,this.running=!1,this.firstTimestamp=-1}constructor(){super(e=>{try{if("configuration"===e.type){this.width=e.data.croppedWidth,this.height=e.data.croppedHeight,this.avcConfiguration=function(e,t){let r=new Uint8Array(11+e.byteLength+t.byteLength);return r[0]=1,r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=255,r[5]=225,r[6]=e.byteLength>>8,r[7]=255&e.byteLength,r.set(e,8),r[8+e.byteLength]=1,r[9+e.byteLength]=t.byteLength>>8,r[10+e.byteLength]=255&t.byteLength,r.set(t,11+e.byteLength),r}(e.sequenceParameterSet,e.pictureParameterSet),this.configurationWritten=!1;return}if(!0===e.keyframe&&(this.framesFromKeyframe.length=0),this.framesFromKeyframe.push(e),!this.muxer)return;this.appendFrame(e)}catch(e){console.error(e)}}),this.running=!1,this.width=0,this.height=0,this.firstTimestamp=-1,this.configurationWritten=!1,this.framesFromKeyframe=[]}}let eQ=(0,H.ky)({recorder:new e$,recording:!1,intervalId:-1,hours:0,minutes:0,seconds:0});(0,H.U5)(()=>eQ.recording,e=>{e?eQ.intervalId=window.setInterval((0,H.aD)(()=>{eQ.seconds+=1,eQ.seconds>=60&&(eQ.seconds=0,eQ.minutes+=1),eQ.minutes>=60&&(eQ.minutes=0,eQ.hours+=1)}),1e3):(window.clearInterval(eQ.intervalId),eQ.intervalId=-1,eQ.hours=0,eQ.minutes=0,eQ.seconds=0)});var e0=r(3042),e1=r(9257),e2=r(2682),e3=r(8222),e4=r(4505),e6=r(4828),e8=r(7430),e5=r(9751),e7=r(2469);let e9=!1,te=[],tt=0,tr=new Map;class ti extends e7.Xn{streamId;pictureReadyEvent=new e7.vp;get onPictureReady(){return this.pictureReadyEvent.event}constructor(e){var t;super(),this.streamId=e,this.addDisposable((t=this.handlePictureReady,tr.set(e,t),{dispose(){tr.delete(e)}}))}handlePictureReady=e=>{this.pictureReadyEvent.fire(e)};feed(e){i.postMessage({type:"decode",data:e,offset:0,length:e.byteLength,renderStateId:this.streamId},[e])}dispose(){super.dispose(),i.postMessage({type:"release",renderStateId:this.streamId})}}function tn(){return n||(n=Promise.all([r.e(118).then(r.t.bind(r,6118,19)),r.e(337).then(r.t.bind(r,6337,19))]).then(([e,{default:t}])=>({YuvBuffer:e,YuvCanvas:t}))),n}class to{maxProfile=M.Baseline;maxLevel=z.Level4;_renderer;get renderer(){return this._renderer}_frameRendered=0;get frameRendered(){return this._frameRendered}_frameSkipped=0;get frameSkipped(){return this._frameSkipped}_writable;get writable(){return this._writable}_yuvCanvas;_initializer;constructor(){tn(),this._renderer=document.createElement("canvas"),this._writable=new T.Vj({write:async e=>{switch(e.type){case"configuration":this.configure(e.data);break;case"frame":{if(!this._initializer)throw Error("Decoder not configured");let t=await this._initializer.promise;t.feed(e.data.slice().buffer)}}}})}async configure(e){this.dispose(),this._initializer=new Z.hP;let{YuvBuffer:t,YuvCanvas:n}=await tn();this._yuvCanvas||(this._yuvCanvas=n.attach(this._renderer));let{encodedWidth:o,encodedHeight:a}=e,s=o/2,l=a/2;this._renderer.width=e.croppedWidth,this._renderer.height=e.croppedHeight;let c=t.format({width:o,height:a,chromaWidth:s,chromaHeight:l,cropLeft:e.cropLeft,cropTop:e.cropTop,cropWidth:e.croppedWidth,cropHeight:e.croppedHeight,displayWidth:e.croppedWidth,displayHeight:e.croppedHeight}),d=await function(){if(i||(i=new Worker(r.tu(new URL(r.p+r.u(292),r.b)))).addEventListener("message",({data:e})=>{switch(e.type){case"decoderReady":for(let e of(e9=!0,te))e.resolve(new ti(tt)),tt+=1;te.length=0;break;case"pictureReady":tr.get(e.renderStateId)?.(e)}}),!e9){let e=new Z.hP;return te.push(e),e.promise}let e=new ti(tt);return tt+=1,Promise.resolve(e)}();this._initializer.resolve(d);let u=o*a,h=u+s*l;d.onPictureReady(({data:e})=>{this._frameRendered+=1;let r=new Uint8Array(e),i=t.frame(c,t.lumaPlane(c,r,o,0),t.chromaPlane(c,r,s,u),t.chromaPlane(c,r,s,h));this._yuvCanvas.drawFrame(i)})}dispose(){this._initializer?.promise.then(e=>e.dispose()).catch(e=>{}),this._initializer=void 0}}var ta="1.25",ts=r(6609);let tl=new r.U(r(4439));class tc{get downloaded(){return this._downloaded}get total(){return this._total}get onProgress(){return this.progressEvent.event}async fetch(e){var t;let r=await window.fetch(e);this._total=Number.parseInt(null!==(t=r.headers.get("Content-Length"))&&void 0!==t?t:"0",10),this.progressEvent.fire([this._downloaded,this._total]);let i=r.body.getReader(),n=[];for(;;){let e=await i.read();if(e.done)break;n.push(e.value),this._downloaded+=e.value.byteLength,this.progressEvent.fire([this._downloaded,this._total])}this._total=n.reduce((e,t)=>e+t.byteLength,0);let o=new Uint8Array(this._total),a=0;for(let e of n)o.set(e,a),a+=e.byteLength;return o}constructor(e){this._downloaded=0,this._total=0,this.progressEvent=new e7.vp,this.promise=this.fetch(e)}}function td(e){return o||(o=new tc(tl)).promise.catch(e=>{o=void 0}),e&&(o.onProgress(e),e([o.downloaded,o.total])),o.promise}var tu=r(9341);class th{setModifier(e,t){switch(e){case C.ControlLeft:this._controlLeft=t;break;case C.ControlRight:this._controlRight=t;break;case C.ShiftLeft:this._shiftLeft=t;break;case C.ShiftRight:this._shiftRight=t;break;case C.AltLeft:this._altLeft=t;break;case C.AltRight:this._altRight=t;break;case C.MetaLeft:this._metaLeft=t;break;case C.MetaRight:this._metaRight=t;break;case C.CapsLock:t&&(this._capsLock=!this._capsLock);break;case C.NumLock:t&&(this._numLock=!this._numLock)}}getMetaState(){let e=0;return this._altLeft&&(e|=k.AltOn|k.AltLeftOn),this._altRight&&(e|=k.AltOn|k.AltRightOn),this._shiftLeft&&(e|=k.ShiftOn|k.ShiftLeftOn),this._shiftRight&&(e|=k.ShiftOn|k.ShiftRightOn),this._controlLeft&&(e|=k.CtrlOn|k.CtrlLeftOn),this._controlRight&&(e|=k.CtrlOn|k.CtrlRightOn),this._metaLeft&&(e|=k.MetaOn|k.MetaLeftOn),this._metaRight&&(e|=k.MetaOn|k.MetaRightOn),this._capsLock&&(e|=k.CapsLockOn),this._numLock&&(e|=k.NumLockOn),e}async down(e){var t;let r=C[e];r&&(this.setModifier(r,!0),this._keys.add(r),await (null===(t=this.client.controlMessageSerializer)||void 0===t?void 0:t.injectKeyCode({action:b.Down,keyCode:r,metaState:this.getMetaState(),repeat:0})))}async up(e){var t;let r=C[e];r&&(this.setModifier(r,!1),this._keys.delete(r),await (null===(t=this.client.controlMessageSerializer)||void 0===t?void 0:t.injectKeyCode({action:b.Up,keyCode:r,metaState:this.getMetaState(),repeat:0})))}async reset(){for(let e of(this._controlLeft=!1,this._controlRight=!1,this._shiftLeft=!1,this._shiftRight=!1,this._altLeft=!1,this._altRight=!1,this._metaLeft=!1,this._metaRight=!1,this._keys))this.up(C[e]);this._keys.clear()}dispose(){}constructor(e){this._controlLeft=!1,this._controlRight=!1,this._shiftLeft=!1,this._shiftRight=!1,this._altLeft=!1,this._altRight=!1,this._metaLeft=!1,this._metaRight=!1,this._capsLock=!1,this._numLock=!0,this._keys=new Set,this.client=e}}class tp{static async register(e){let t=await tu.qG.register(e,0,tu.XC.DESCRIPTOR);return new tp(t)}async down(e){let t=tu.sm[e];t&&(this.hidKeyboard.down(t),await this.aoaKeyboard.sendInputReport(this.hidKeyboard.serializeInputReport()))}async up(e){let t=tu.sm[e];t&&(this.hidKeyboard.up(t),await this.aoaKeyboard.sendInputReport(this.hidKeyboard.serializeInputReport()))}async reset(){this.hidKeyboard.reset(),await this.aoaKeyboard.sendInputReport(this.hidKeyboard.serializeInputReport())}async dispose(){await this.aoaKeyboard.unregister()}constructor(e){this.hidKeyboard=new tu.XC,this.aoaKeyboard=e}}let tg=()=>{},tf=new class{get rotatedWidth(){return 1&tf.rotation?tf.height:tf.width}get rotatedHeight(){return 1&tf.rotation?tf.width:tf.height}async pushServer(){let e=await td();await eW.pushServer(eG.d.device,new T.Pz({start(t){t.enqueue(new T.sS(e)),t.close()}}))}async stop(){var e;await (null===(e=this.client)||void 0===e?void 0:e.close()),this.dispose()}dispose(){var e,t;null===(e=this.decoder)||void 0===e||e.dispose(),this.decoder=void 0,eQ.recording&&(eQ.recorder.stop(),eQ.recording=!1),null===(t=this.keyboard)||void 0===t||t.dispose(),this.keyboard=void 0,this.fps="0",clearTimeout(this.fpsCounterIntervalId),this.isFullScreen&&(document.exitFullscreen().catch(tg),this.isFullScreen=!1),this.client=void 0,this.running=!1}setFullScreenContainer(e){this.fullScreenContainer=e}setRendererContainer(e){this.rendererContainer=e}clientPositionToDevicePosition(e,t){let r=this.rendererContainer.getBoundingClientRect(),i=eo((e-r.x)/r.width,0,1),n=eo((t-r.y)/r.height,0,1);switch(1&this.rotation&&([i,n]=[n,i]),this.rotation){case 1:n=1-n;break;case 2:i=1-i,n=1-n;break;case 3:i=1-i}return{x:i*this.width,y:n*this.height}}constructor(){this.running=!1,this.fullScreenContainer=null,this.rendererContainer=null,this.isFullScreen=!1,this.logVisible=!1,this.log=[],this.demoModeVisible=!1,this.navigationBarVisible=!0,this.width=0,this.height=0,this.rotation=0,this.client=void 0,this.hoverHelper=void 0,this.keyboard=void 0,this.decoder=void 0,this.configuration=void 0,this.fpsCounterIntervalId=void 0,this.fps="0",this.connecting=!1,this.serverTotalSize=0,this.serverDownloadedSize=0,this.debouncedServerDownloadedSize=0,this.serverDownloadSpeed=0,this.serverUploadedSize=0,this.debouncedServerUploadedSize=0,this.serverUploadSpeed=0,this.start=async()=>{if(eG.d.device)try{var e;let t;if(!tw.clientSettings.decoder)throw Error("No available decoder");(0,H.z)(()=>{this.serverTotalSize=0,this.serverDownloadedSize=0,this.debouncedServerDownloadedSize=0,this.serverUploadedSize=0,this.debouncedServerUploadedSize=0,this.connecting=!0});let r=setInterval((0,H.aD)(()=>{this.serverDownloadSpeed=this.serverDownloadedSize-this.debouncedServerDownloadedSize,this.debouncedServerDownloadedSize=this.serverDownloadedSize}),1e3);try{t=await td((0,H.aD)(e=>{let[t,r]=e;this.serverDownloadedSize=t,this.serverTotalSize=r})),(0,H.z)(()=>{this.serverDownloadSpeed=this.serverDownloadedSize-this.debouncedServerDownloadedSize,this.debouncedServerDownloadedSize=this.serverDownloadedSize})}finally{clearInterval(r)}r=setInterval((0,H.aD)(()=>{this.serverUploadSpeed=this.serverUploadedSize-this.debouncedServerUploadedSize,this.debouncedServerUploadedSize=this.serverUploadedSize}),1e3);try{await eW.pushServer(eG.d.device,new T.Pz({start(e){e.enqueue(new T.sS(t)),e.close()}}).pipeThrough(new T.em(q.j4)).pipeThrough(new eJ.hK((0,H.aD)(e=>{this.serverUploadedSize=e})))),(0,H.z)(()=>{this.serverUploadSpeed=this.serverUploadedSize-this.debouncedServerUploadedSize,this.debouncedServerUploadedSize=this.serverUploadedSize})}finally{clearInterval(r)}let i=null!==(e=tw.decoders.find(e=>e.key===tw.clientSettings.decoder))&&void 0!==e?e:tw.decoders[0],n=new i.Constructor;(0,H.z)(()=>{this.decoder=n;let e=0,t=0;this.fpsCounterIntervalId=setInterval((0,H.aD)(()=>{let r=n.frameRendered-e,i=n.frameSkipped-t;this.fps="".concat(r).concat(i?"+".concat(i," skipped"):""),e=n.frameRendered,t=n.frameSkipped}),1e3)});let o=new ew;tw.clientSettings.ignoreDecoderCodecArgs||(o.value.profile=n.maxProfile,o.value.level=n.maxLevel);let a=new ei(new eU({logLevel:L.Debug,...tw.settings,sendDeviceMeta:!1,sendDummyByte:!1,codecOptions:o}));(0,H.z)(()=>{this.log=[],this.log.push("[client] Server version: ".concat(ta)),this.log.push("[client] Server arguments: ".concat(a.formatServerArguments().join(" ")))});let s=await eW.start(eG.d.device,eb,ta,a);s.stdout.pipeTo(new T.Vj({write:(0,H.aD)(e=>{this.log.push(e)})})),eQ.recorder=new e$;let l=0;s.videoStream.pipeThrough(new T.N7((0,H.aD)(e=>{if("configuration"===e.type){let{croppedWidth:t,croppedHeight:r}=e.data;this.log.push("[client] Video size changed: ".concat(t,"x").concat(r)),this.configuration=e,this.width=t,this.height=r}else e.keyframe&&(l&&this.log.push("[client] Keyframe interval: ".concat((Number(e.pts)-l)/1e3|0,"ms")),l=Number(e.pts))}))).pipeThrough(eQ.recorder).pipeTo(n.writable).catch(()=>{}),s.exit.then(this.dispose),s.deviceMessageStream.pipeTo(new T.Vj({write(e){e.type===P.Clipboard&&window.navigator.clipboard.writeText(e.content)}})).catch(()=>{}),tw.clientSettings.turnScreenOff&&await s.controlMessageSerializer.setScreenPowerMode(x.Off),(0,H.z)(()=>{this.client=s,this.hoverHelper=new el,this.running=!0}),eG.d.backend instanceof ts.Ub?this.keyboard=await tp.register(eG.d.backend.device):this.keyboard=new th(s)}catch(e){eG.d.showErrorDialog(e)}finally{(0,H.z)(()=>{this.connecting=!1})}},(0,H.ky)(this,{start:!1,stop:H.aD.bound,dispose:H.aD.bound,setFullScreenContainer:H.aD.bound,setRendererContainer:H.aD.bound,clientPositionToDevicePosition:!1}),(0,H.EH)(()=>{eG.d.device||this.dispose()}),"object"==typeof document&&document.addEventListener("fullscreenchange",()=>{document.fullscreenElement||(0,H.z)(()=>{this.isFullScreen=!1})}),(0,H.EH)(()=>{if(this.rendererContainer&&this.decoder){for(;this.rendererContainer.firstChild;)this.rendererContainer.firstChild.remove();this.rendererContainer.appendChild(this.decoder.renderer)}})}},tm=(0,j.Z)({labelRight:{marginLeft:"4px"}}),ty=(0,U.Pi)(function(e){let{definition:t,value:r,onChange:i}=e,n=tm(),o=(0,O.jsxs)(_.K,{horizontal:!0,verticalAlign:"center",children:[(0,O.jsx)("span",{children:t.label}),!!t.description&&(0,O.jsx)(e0.G,{content:t.description,children:(0,O.jsx)(e1.J,{className:n.labelRight,iconName:eJ.PJ.Info})}),t.labelExtra]});switch(t.type){case"text":return(0,O.jsx)(e2.n,{label:o,placeholder:t.placeholder,value:r,onChange:(e,r)=>i(t,r)});case"dropdown":return(0,O.jsx)(e3.L,{label:o,options:t.options,placeholder:t.placeholder,selectedKey:r,onChange:(e,r)=>i(t,r.key)});case"toggle":return(0,O.jsx)(e4.Z,{label:o,checked:r,disabled:t.disabled,onChange:(e,r)=>i(t,r)});case"number":return(0,O.jsx)(e6.k,{label:t.label,labelPosition:e8.L.top,min:t.min,max:t.max,step:t.step,value:r.toString(),onChange:(e,r)=>i(t,Number.parseInt(r,10))})}}),tw=(0,H.ky)({settingsVisible:!1,displays:[],encoders:[],decoders:[{key:"tinyh264",name:"TinyH264 (Software)",Constructor:to}],settings:{maxSize:1080,bitRate:4e6,lockVideoOrientation:D.Unlocked,displayId:0,crop:"",powerOn:!0},clientSettings:{}},{decoders:H.LO.shallow,settings:H.LO.deep,clientSettings:H.LO.deep});(0,H.EH)(()=>{eG.d.device&&(0,H.z)(()=>{tw.encoders=[],tw.settings.encoderName=void 0,tw.displays=[],tw.settings.displayId=void 0})}),(0,H.EH)(()=>{tw.clientSettings.decoder=tw.decoders[0].key});let tv=(0,H.Fl)(()=>{let e=[];return e.push({group:"settings",key:"powerOn",type:"toggle",label:"Turn device on when starting"},{group:"clientSettings",key:"turnScreenOff",type:"toggle",label:"Turn screen off when starting"},{group:"settings",key:"stayAwake",type:"toggle",label:"Stay awake (if plugged in)"},{group:"settings",key:"powerOffOnClose",type:"toggle",label:"Turn device off when exiting"}),e.push({group:"settings",key:"displayId",type:"dropdown",label:"Display",placeholder:"Press refresh to update available displays",labelExtra:(0,O.jsx)(e5.h,{iconProps:{iconName:eJ.PJ.ArrowClockwise},disabled:!eG.d.device,text:"Refresh",onClick:async()=>{try{await tf.pushServer();let e=await eW.getDisplays(eG.d.device,eb,ta,new ei(new eU({logLevel:L.Debug})));(0,H.z)(()=>{tw.displays=e,tw.settings.displayId&&tw.displays.includes(tw.settings.displayId)||(tw.settings.displayId=tw.displays[0])})}catch(e){eG.d.showErrorDialog(e)}}}),options:tw.displays.map(e=>({key:e,text:e.toString()}))}),e.push({group:"settings",key:"crop",type:"text",label:"Crop",placeholder:"W:H:X:Y"}),e.push({group:"settings",key:"maxSize",type:"number",label:"Max Resolution (longer side, 0 = unlimited)",min:0,max:2560,step:50}),e.push({group:"settings",key:"bitRate",type:"number",label:"Max Bit Rate",min:100,max:1e8,step:100}),e.push({group:"settings",key:"lockVideoOrientation",type:"dropdown",label:"Lock Video Orientation",options:[{key:D.Unlocked,text:"Unlocked"},{key:D.Initial,text:"Current"},{key:D.Portrait,text:"Portrait"},{key:D.Landscape,text:"Landscape"},{key:D.PortraitFlipped,text:"Portrait (Flipped)"},{key:D.LandscapeFlipped,text:"Landscape (Flipped)"}]}),e.push({group:"settings",key:"encoderName",type:"dropdown",label:"Encoder",placeholder:"Press refresh to update available encoders",labelExtra:(0,O.jsx)(e5.h,{iconProps:{iconName:eJ.PJ.ArrowClockwise},disabled:!eG.d.device,text:"Refresh",onClick:async()=>{try{await tf.pushServer();let e=await eW.getEncoders(eG.d.device,eb,ta,new ei(new eU({logLevel:L.Debug})));(0,H.z)(()=>{tw.encoders=e,tw.settings.encoderName&&tw.encoders.includes(tw.settings.encoderName)||(tw.settings.encoderName=tw.encoders[0])})}catch(e){eG.d.showErrorDialog(e)}}}),options:tw.encoders.map(e=>({key:e,text:e}))}),tw.decoders.length>1&&e.push({group:"clientSettings",key:"decoder",type:"dropdown",label:"Decoder",options:tw.decoders.map(e=>({key:e.key,text:e.name,data:e}))}),e.push({group:"clientSettings",key:"ignoreDecoderCodecArgs",type:"toggle",label:"Ignore decoder's codec arguments",description:"Some decoders don't support all H.264 profile/levels, so they request the device to encode at their highest-supported codec. However, some super old devices may not support that codec so their encoders will fail to start. Use this option to let device choose the codec to be used."}),e}),tS=(0,H.Fl)(()=>{let e=[];return tf.running?e.push({key:"stop",iconProps:{iconName:eJ.PJ.Stop},text:"Stop",onClick:tf.stop}):e.push({key:"start",disabled:!eG.d.device,iconProps:{iconName:eJ.PJ.Play},text:"Start",onClick:tf.start}),e.push(eQ.recording?{key:"Record",iconProps:{iconName:eJ.PJ.Record,style:{color:"red"}},text:"".concat(eQ.hours?"".concat(eQ.hours,":"):"").concat(eQ.minutes.toString().padStart(2,"0"),":").concat(eQ.seconds.toString().padStart(2,"0")),onClick:(0,H.aD)(()=>{tf.fullScreenContainer.focus(),eQ.recorder.stop(),eQ.recording=!1})}:{key:"Record",disabled:!tf.running,iconProps:{iconName:eJ.PJ.Record},text:"Record",onClick:(0,H.aD)(()=>{tf.fullScreenContainer.focus(),eQ.recorder.start(),eQ.recording=!0})}),e.push({key:"fullscreen",disabled:!tf.running,iconProps:{iconName:eJ.PJ.FullScreenMaximize},iconOnly:!0,text:"Fullscreen",onClick:(0,H.aD)(()=>{tf.fullScreenContainer.focus(),tf.fullScreenContainer.requestFullscreen(),tf.isFullScreen=!0})}),e.push({key:"volumeUp",disabled:!tf.running,iconProps:{iconName:eJ.PJ.Speaker2},iconOnly:!0,text:"Volume Up",onClick:async()=>{var e,t;tf.fullScreenContainer.focus(),await (null===(e=tf.client)||void 0===e?void 0:e.controlMessageSerializer.injectKeyCode({action:b.Down,keyCode:C.VolumeUp,repeat:0,metaState:0})),await (null===(t=tf.client)||void 0===t?void 0:t.controlMessageSerializer.injectKeyCode({action:b.Up,keyCode:C.VolumeUp,repeat:0,metaState:0}))}},{key:"volumeDown",disabled:!tf.running,iconProps:{iconName:eJ.PJ.Speaker1},iconOnly:!0,text:"Volume Down",onClick:async()=>{var e,t;tf.fullScreenContainer.focus(),await (null===(e=tf.client)||void 0===e?void 0:e.controlMessageSerializer.injectKeyCode({action:b.Down,keyCode:C.VolumeDown,repeat:0,metaState:0})),await (null===(t=tf.client)||void 0===t?void 0:t.controlMessageSerializer.injectKeyCode({action:b.Up,keyCode:C.VolumeDown,repeat:0,metaState:0}))}},{key:"volumeMute",disabled:!tf.running,iconProps:{iconName:eJ.PJ.SpeakerOff},iconOnly:!0,text:"Toggle Mute",onClick:async()=>{var e,t;tf.fullScreenContainer.focus(),await (null===(e=tf.client)||void 0===e?void 0:e.controlMessageSerializer.injectKeyCode({action:b.Down,keyCode:C.VolumeMute,repeat:0,metaState:0})),await (null===(t=tf.client)||void 0===t?void 0:t.controlMessageSerializer.injectKeyCode({action:b.Up,keyCode:C.VolumeMute,repeat:0,metaState:0}))}}),e.push({key:"rotateDevice",disabled:!tf.running,iconProps:{iconName:eJ.PJ.Orientation},iconOnly:!0,text:"Rotate Device",onClick:()=>{tf.fullScreenContainer.focus(),tf.client.controlMessageSerializer.rotateDevice()}},{key:"rotateVideoLeft",disabled:!tf.running,iconProps:{iconName:eJ.PJ.RotateLeft},iconOnly:!0,text:"Rotate Video Left",onClick:(0,H.aD)(()=>{tf.fullScreenContainer.focus(),tf.rotation-=1,tf.rotation<0&&(tf.rotation=3)})},{key:"rotateVideoRight",disabled:!tf.running,iconProps:{iconName:eJ.PJ.RotateRight},iconOnly:!0,text:"Rotate Video Right",onClick:(0,H.aD)(()=>{tf.fullScreenContainer.focus(),tf.rotation=tf.rotation+1&3})}),e.push({key:"turnScreenOff",disabled:!tf.running,iconProps:{iconName:eJ.PJ.Lightbulb},iconOnly:!0,text:"Turn Screen Off",onClick:()=>{tf.fullScreenContainer.focus(),tf.client.controlMessageSerializer.setScreenPowerMode(x.Off)}},{key:"turnScreenOn",disabled:!tf.running,iconProps:{iconName:eJ.PJ.LightbulbFilament},iconOnly:!0,text:"Turn Screen On",onClick:()=>{tf.fullScreenContainer.focus(),tf.client.controlMessageSerializer.setScreenPowerMode(x.Normal)}}),tf.running&&e.push({key:"fps",text:"FPS: ".concat(tf.fps),disabled:!0}),e.push({key:"spacer",onRender:()=>(0,O.jsx)(eX.X,{})},{key:"separator",disabled:!0,itemType:X.n.Divider}),e.push({key:"NavigationBar",iconProps:{iconName:eJ.PJ.PanelBottom},canCheck:!0,checked:tf.navigationBarVisible,text:"Navigation Bar",iconOnly:!0,onClick:(0,H.aD)(()=>{tf.navigationBarVisible=!tf.navigationBarVisible})},{key:"Log",iconProps:{iconName:eJ.PJ.TextGrammarError},canCheck:!0,checked:tf.logVisible,text:"Log",iconOnly:!0,onClick:(0,H.aD)(()=>{tf.logVisible=!tf.logVisible})},{key:"Settings",iconProps:{iconName:eJ.PJ.Settings},canCheck:!0,checked:tw.settingsVisible,text:"Settings",iconOnly:!0,onClick:(0,H.aD)(()=>{tw.settingsVisible=!tw.settingsVisible})},{key:"DemoMode",iconProps:{iconName:eJ.PJ.Wand},canCheck:!0,checked:tf.demoModeVisible,text:"Demo Mode",iconOnly:!0,onClick:(0,H.aD)(()=>{tf.demoModeVisible=!tf.demoModeVisible})},{key:"info",iconProps:{iconName:eJ.PJ.Info},iconOnly:!0,text:"About",tooltipHostProps:{content:(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)("p",{children:[(0,O.jsx)(eY.d,{href:"https://github.com/Genymobile/scrcpy",spaceAfter:!0,children:"Scrcpy"}),"developed by Genymobile can display the screen with low latency (1~2 frames) and control the device, all without root access."]}),(0,O.jsx)("p",{children:"This is a TypeScript implementation of the client part. Paired with official pre-built server binary."})]}),calloutProps:{calloutMaxWidth:300}}}),e}),tb=(0,U.Pi)(function(){return(0,O.jsx)(Y.X,{items:tS.get()})});var tk=r(7428);let tC=(0,j.Z)({container:{height:"40px",backgroundColor:"#999"},bar:{width:"100%",maxWidth:"300px"},icon:{color:"white"},back:{transform:"rotate(180deg)"}});function tx(e){return!!tf.client&&0===e.button&&(tf.fullScreenContainer.focus(),e.currentTarget.setPointerCapture(e.pointerId),e.preventDefault(),e.stopPropagation(),!0)}function tP(e){return!!tf.client&&0===e.button}function tL(e){tx(e)&&tf.client.controlMessageSerializer.backOrScreenOn(b.Down)}function tD(e){tP(e)&&tf.client.controlMessageSerializer.backOrScreenOn(b.Up)}function tM(e){tx(e)&&tf.client.controlMessageSerializer.injectKeyCode({action:b.Down,keyCode:C.AndroidHome,repeat:0,metaState:0})}function tz(e){tP(e)&&tf.client.controlMessageSerializer.injectKeyCode({action:b.Up,keyCode:C.AndroidHome,repeat:0,metaState:0})}function tO(e){tx(e)&&tf.client.controlMessageSerializer.injectKeyCode({action:b.Down,keyCode:C.AndroidAppSwitch,repeat:0,metaState:0})}function tN(e){tP(e)&&tf.client.controlMessageSerializer.injectKeyCode({action:b.Up,keyCode:C.AndroidAppSwitch,repeat:0,metaState:0})}let tE=(0,U.Pi)(function(e){let{className:t,style:r,children:i}=e,n=tC();return tf.navigationBarVisible?(0,O.jsxs)(_.K,{className:(0,tk.z)(n.container,t),verticalFill:!0,horizontalAlign:"center",style:r,children:[i,(0,O.jsxs)(_.K,{className:n.bar,verticalFill:!0,horizontal:!0,horizontalAlign:"space-evenly",verticalAlign:"center",children:[(0,O.jsx)(e5.h,{className:(0,tk.z)(n.back,n.icon),iconProps:{iconName:eJ.PJ.Play},onPointerDown:tL,onPointerUp:tD}),(0,O.jsx)(e5.h,{className:n.icon,iconProps:{iconName:eJ.PJ.Circle},onPointerDown:tM,onPointerUp:tz}),(0,O.jsx)(e5.h,{className:n.icon,iconProps:{iconName:eJ.PJ.Stop},onPointerDown:tO,onPointerUp:tN})]})]}):(0,O.jsx)("div",{className:t,style:r,children:i})}),t_=(0,j.Z)({video:{transformOrigin:"center center",touchAction:"none"}});function tA(e){if(!tf.client)return;tf.fullScreenContainer.focus(),e.preventDefault(),e.stopPropagation();let{x:t,y:r}=tf.clientPositionToDevicePosition(e.clientX,e.clientY);tf.client.controlMessageSerializer.injectScroll({screenWidth:tf.client.screenWidth,screenHeight:tf.client.screenHeight,pointerX:t,pointerY:r,scrollX:-e.deltaX/100,scrollY:-e.deltaY/100,buttons:0})}function tR(e,t){let r;if(!tf.client)return;let{pointerType:i}=t;r="mouse"===i?S.Finger:BigInt(t.pointerId);let{x:n,y:o}=tf.clientPositionToDevicePosition(t.clientX,t.clientY),a=tf.hoverHelper.process({action:e,pointerId:r,screenWidth:tf.client.screenWidth,screenHeight:tf.client.screenHeight,pointerX:n,pointerY:o,pressure:t.pressure,buttons:t.buttons});for(let e of a)tf.client.controlMessageSerializer.injectTouch(e)}function tI(e){tf.client&&(tf.fullScreenContainer.focus(),e.preventDefault(),e.stopPropagation(),e.currentTarget.setPointerCapture(e.pointerId),tR(v.Down,e))}function tj(e){tf.client&&(e.preventDefault(),e.stopPropagation(),tR(0===e.buttons?v.HoverMove:v.Move,e))}function tF(e){tf.client&&(e.preventDefault(),e.stopPropagation(),tR(v.Up,e))}function tT(e){tf.client&&(e.preventDefault(),e.stopPropagation(),tR(v.HoverExit,e),tR(v.Up,e))}function tK(e){e.preventDefault()}function tV(){let e=t_(),[t,r]=(0,G.useState)(null);return(0,G.useEffect)(()=>{if(tf.setRendererContainer(t),t)return t.addEventListener("wheel",tA,{passive:!1}),()=>{t.removeEventListener("wheel",tA)}},[t]),(0,O.jsx)("div",{ref:r,className:e.video,style:{width:tf.width,height:tf.height,transform:"translate(".concat((tf.rotatedWidth-tf.width)/2,"px, ").concat((tf.rotatedHeight-tf.height)/2,"px) rotate(").concat(90*tf.rotation,"deg)")},onPointerDown:tI,onPointerMove:tj,onPointerUp:tF,onPointerCancel:tF,onPointerLeave:tT,onContextMenu:tK})}let tH=(e,t,r,i,n)=>{(0,G.useEffect)(()=>{let n="function"==typeof e?e():e;return n.addEventListener(t,r,i),()=>n.removeEventListener(t,r,i)},n)},tU=G.useLayoutEffect;Symbol("UNINITIALIZED");let tB="undefined"!=typeof localStorage?function(e,t){var r;let[i,n]=(0,G.useState)(()=>localStorage.getItem(e)||t);tH(globalThis,"storage",()=>n(null!==(r=localStorage.getItem(e))&&void 0!==r?r:t),{passive:!0},[e,t]);let o=function(e){let t=function(e){let t=(0,G.useRef)(e);return tU(()=>{t.current=e},[e]),t}(e);return function(e){let t=(0,G.useRef)(e);return t.current}(function(){for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];return t.current(...r)})}(t=>{n(t),localStorage.setItem(e,t)});return[i,o]}:(e,t)=>[t,()=>{}],tW=(0,j.Z)({layerHost:{position:"absolute",top:0,bottom:0,left:0,right:0,pointerEvents:"none",...F.q5.margin(0)},fullScreenContainer:{flexGrow:1,display:"flex",flexDirection:"column",backgroundColor:"black",":focus-visible":{...F.q5.outline("0")}},fullScreenStatusBar:{display:"flex",color:"white",columnGap:"12px",...F.q5.padding("8px","20px")},spacer:{flexGrow:1}}),tG=(0,U.Pi)(()=>{let e=tW(),t=(0,I.M)("layerHost"),[r,i]=(0,G.useState)(!1);return((0,G.useEffect)(()=>{i(!0)},[]),r)?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(N.Z,{id:t,className:e.layerHost}),(0,O.jsx)(E.V,{hidden:!tf.connecting,modalProps:{layerProps:{hostId:t}},dialogContentProps:{title:"Connecting..."},children:(0,O.jsxs)(_.K,{tokens:eJ.WT,children:[(0,O.jsx)(A.Y,{label:"1. Downloading scrcpy server...",percentComplete:tf.serverTotalSize?tf.serverDownloadedSize/tf.serverTotalSize:void 0,description:(0,eJ.CY)(tf.debouncedServerDownloadedSize,tf.serverTotalSize,tf.serverDownloadSpeed)}),(0,O.jsx)(A.Y,{label:"2. Pushing scrcpy server to device...",progressHidden:0===tf.serverTotalSize||tf.serverDownloadedSize!==tf.serverTotalSize,percentComplete:tf.serverUploadedSize/tf.serverTotalSize,description:(0,eJ.CY)(tf.debouncedServerUploadedSize,tf.serverTotalSize,tf.serverUploadSpeed)}),(0,O.jsx)(A.Y,{label:"3. Starting scrcpy server on device...",progressHidden:0===tf.serverTotalSize||tf.serverUploadedSize!==tf.serverTotalSize})]})})]}):null});async function tJ(e){if(!tf.client)return;e.preventDefault(),e.stopPropagation();let{type:t,code:r}=e;tf.keyboard["keydown"===t?"down":"up"](r)}function tX(){var e;tf.client&&(null===(e=tf.keyboard)||void 0===e||e.reset())}let tY=()=>{var e;let t=tW();(0,G.useEffect)(()=>{1===tw.decoders.length&&"function"==typeof window.VideoDecoder&&(0,H.z)(()=>{tw.decoders.unshift({key:"webcodecs",name:"WebCodecs",Constructor:V})})},[]);let[r,i]=(0,G.useState)(!1);(0,G.useEffect)(()=>{if("keyboard"in navigator)return navigator.keyboard.lock(),i(!0),()=>{navigator.keyboard.unlock()}},[]);let[n,o]=tB("scrcpy-hint-hidden","false");return(0,G.useEffect)(()=>(window.addEventListener("blur",tX),()=>{window.removeEventListener("blur",tX)}),[]),(0,O.jsxs)(_.K,{...eJ.LE,children:[(0,O.jsx)(W(),{children:(0,O.jsx)("title",{children:"Scrcpy - Tango"})}),(0,O.jsx)(tb,{}),(0,O.jsxs)(_.K,{horizontal:!0,grow:!0,styles:{root:{height:0}},children:[(0,O.jsxs)("div",{ref:tf.setFullScreenContainer,className:t.fullScreenContainer,tabIndex:0,onKeyDown:tJ,onKeyUp:tJ,children:[r&&"true"!==n&&tf.isFullScreen&&(0,O.jsxs)("div",{className:t.fullScreenStatusBar,children:[(0,O.jsx)("div",{children:null===(e=eG.d.backend)||void 0===e?void 0:e.serial}),(0,O.jsxs)("div",{children:["FPS: ",tf.fps]}),(0,O.jsx)("div",{className:t.spacer}),(0,O.jsx)("div",{children:"Press and hold ESC to exit full screen"}),(0,O.jsx)(R.r,{onClick:()=>o("true"),children:"Don't show again"})]}),(0,O.jsx)(J.wM,{width:tf.rotatedWidth,height:tf.rotatedHeight,BottomElement:tE,children:(0,O.jsx)(tV,{})})]}),(0,O.jsx)("div",{style:{padding:12,overflow:"hidden auto",display:tf.logVisible?"block":"none",width:500,fontFamily:"monospace",overflowY:"auto",whiteSpace:"pre-wrap",wordWrap:"break-word"},children:tf.log.map((e,t)=>(0,O.jsx)("div",{children:e},t))}),(0,O.jsxs)("div",{style:{padding:12,overflow:"hidden auto",display:tw.settingsVisible?"block":"none",width:300},children:[(0,O.jsx)("div",{children:"Changes will take effect on next connection"}),tv.get().map(e=>(0,O.jsx)(ty,{definition:e,value:tw[e.group][e.key],onChange:(0,H.aD)((e,t)=>tw[e.group][e.key]=t)},e.key))]}),(0,O.jsx)(J.bq,{style:{display:tf.demoModeVisible?"block":"none"}}),(0,O.jsx)(tG,{})]})]})};var tq=(0,U.Pi)(tY)},4439:function(e,t,r){"use strict";e.exports=r.p+"static/chunks/scrcpy-server.50786887a0e88460"}},function(e){e.O(0,[682,294,341,774,888,179],function(){return e(e.s=7645)}),_N_E=e.O()}]);
//# sourceMappingURL=scrcpy-9a5c6a02f7f4937f.js.map