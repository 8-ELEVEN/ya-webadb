(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[236],{3587:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/shell",function(){return i(4077)}])},5930:function(e,t,i){"use strict";i.r(t),i.d(t,{AdbTerminal:function(){return c}});var s=i(7417),n=i(2469),o=i(6261),r=i(2825),l=i(4623),a=i(8913),d=i(9742);class c extends n.Xn{get socket(){return this._socket}set socket(e){if(this._socket){var t;this.dispose(),null===(t=this._socketAbortController)||void 0===t||t.abort()}if(this._socket=e,e){this.terminal.clear(),this.terminal.reset(),this._socketAbortController=new o.HS,e.stdout.pipeTo(new o.Vj({write:e=>{this.terminal.write(e)}}),{signal:this._socketAbortController.signal});let i=e.stdin.getWriter();this.addDisposable(this.terminal.onData(e=>{let t=(0,s.lz)(e);i.write(t)})),this.fit()}}setContainer(e){e.appendChild(this.element),this.terminal.element||(this.element.offsetWidth,this.terminal.open(this.element),this.terminal.loadAddon(new d.WebglAddon),this.terminal.options.cursorBlink=!0,this.fit())}fit(){var e;this.fitAddon.fit();let{rows:t,cols:i}=this.terminal;null===(e=this._socket)||void 0===e||e.resize(t,i)}constructor(){super(),this.element=document.createElement("div"),this.terminal=new r.Terminal({allowProposedApi:!0,allowTransparency:!0,cursorStyle:"bar",cursorBlink:!0,fontFamily:'"Cascadia Code", Consolas, monospace, "Source Han Sans SC", "Microsoft YaHei"',letterSpacing:1,scrollback:9e3,smoothScrollDuration:50,overviewRulerWidth:20}),this.searchAddon=new a.SearchAddon,this.fitAddon=new l.FitAddon,this.element.style.width="100%",this.element.style.height="100%",this.element.style.overflow="hidden",this.terminal.loadAddon(this.searchAddon),this.terminal.loadAddon(this.fitAddon)}}},4077:function(e,t,i){"use strict";let s;i.r(t);var n=i(4471),o=i(2606),r=i(261),l=i(8663),a=i(5134),d=i(7609),c=i(7362),h=i(6323),u=i(6779),v=i(6609),f=i.n(v),w=i(3370);i(587);var m=i(6745),x=i(6328),b=i(9367);let k=(0,d.Z)({count:{...c.q5.padding("0","8px")}});{let{AdbTerminal:p}=i(5930);s=new p}let C={decorations:{matchBackground:"#42557b",matchOverviewRuler:"#d18616",activeMatchBackground:"#6199ff2f",activeMatchColorOverviewRuler:"#d186167e"}},A=(0,h.ky)({visible:!1,index:void 0,count:void 0,setVisible(e){this.visible=e},searchKeyword:"",setSearchKeyword(e){this.searchKeyword=e,s.searchAddon.findNext(e,{...C,incremental:!0})},searchPrevious(){s.searchAddon.findPrevious(this.searchKeyword,C)},searchNext(){s.searchAddon.findNext(this.searchKeyword,C)}},{searchPrevious:h.aD.bound,searchNext:h.aD.bound});s&&s.searchAddon.onDidChangeResults(e=>{console.log(e),(0,h.z)(()=>{e?(A.index=e.resultIndex,A.count=e.resultCount):(A.index=void 0,A.count=void 0)})}),(0,h.EH)(()=>{if(s){if(!x.d.device){s.socket=void 0;return}!s.socket&&A.visible&&x.d.device.subprocess.shell().then((0,h.aD)(e=>{s.socket=e}),e=>{x.d.showErrorDialog(e)})}});let g={iconName:b.PJ.ChevronUp},_={iconName:b.PJ.ChevronDown},y=()=>{let e=k(),t=(0,w.useCallback)((e,t)=>{A.setSearchKeyword(null!=t?t:"")},[]),i=(0,w.useCallback)(()=>{s.fit()},[]),d=(0,w.useCallback)(e=>{e&&s.setContainer(e)},[]);return(0,w.useEffect)(()=>(A.setVisible(!0),()=>{A.setVisible(!1)}),[]),(0,n.jsxs)(o.K,{...b.LE,children:[(0,n.jsx)(f(),{children:(0,n.jsx)("title",{children:"Interactive Shell - Android Web Toolbox"})}),(0,n.jsx)(r.v,{children:(0,n.jsxs)(o.K,{horizontal:!0,children:[(0,n.jsx)(r.v,{grow:!0,children:(0,n.jsx)(l.R,{placeholder:"Find",value:A.searchKeyword,onChange:t,onSearch:A.searchNext})}),0===A.count?(0,n.jsx)(r.v,{className:e.count,align:"center",children:"No results"}):void 0!==A.count?(0,n.jsxs)(r.v,{className:e.count,align:"center",children:[A.index+1," of ",A.count]}):null,(0,n.jsx)(r.v,{children:(0,n.jsx)(a.h,{disabled:!A.searchKeyword,iconProps:g,onClick:A.searchPrevious})}),(0,n.jsx)(r.v,{children:(0,n.jsx)(a.h,{disabled:!A.searchKeyword,iconProps:_,onClick:A.searchNext})})]})}),(0,n.jsxs)(r.v,{grow:!0,styles:{root:{position:"relative",minHeight:0}},children:[(0,n.jsx)(m.do,{onResize:i}),(0,n.jsx)("div",{ref:d,style:{height:"100%"}})]})]})};t.default=(0,u.Pi)(y)}},function(e){e.O(0,[988,401,774,888,179],function(){return e(e.s=3587)}),_N_E=e.O()}]);
//# sourceMappingURL=shell-e69dd90e1a234c58.js.map