"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[307],{9001:function(t,e,i){i.d(e,{Z:function(){return o}});var s=i(3499),a=i(3370),r=i(4678),h=i(7893),n=i(4551),d=i(771),o=function(t){var e=t.className,i=a.useState(function(){return(0,h.z)()})[0],o=t.id,u=void 0===o?i:o,l=a.useRef({hostId:u,rootRef:a.useRef(null),notifyLayersChanged:function(){}});return a.useImperativeHandle(t.componentRef,function(){return l.current}),a.useEffect(function(){(0,d._Y)(u,l.current),(0,d.EQ)(u)},[]),(0,r.k)(function(){(0,d.nw)(u,l.current),(0,d.EQ)(u)}),a.createElement("div",(0,s.pi)({},t,{className:(0,n.i)("ms-LayerHost",e),ref:l.current.rootRef}))}},248:function(t){var e,i,s,a,r,h,n,d,o,u,l,f,c,p,w,g,m,k,C,y,b,V=(e=Object.defineProperty,i=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,r=Math.pow,((t,i)=>{for(var s in i)e(t,s,{get:i[s],enumerable:!0})})(h={},{default:()=>C}),n=class{constructor(t){this.value=t}},d=class{constructor(t){this.value=t}},o=class{constructor(){this.pos=0,this.helper=new Uint8Array(8),this.helperView=new DataView(this.helper.buffer),this.offsets=new WeakMap,this.dataOffsets=new WeakMap}writeFloat32(t){this.helperView.setFloat32(0,t,!1),this.write(this.helper.subarray(0,4))}writeFloat64(t){this.helperView.setFloat64(0,t,!1),this.write(this.helper)}writeUnsignedInt(t,e=u(t)){let i=0;switch(e){case 6:this.helperView.setUint8(i++,t/r(2,40)|0);case 5:this.helperView.setUint8(i++,t/r(2,32)|0);case 4:this.helperView.setUint8(i++,t>>24);case 3:this.helperView.setUint8(i++,t>>16);case 2:this.helperView.setUint8(i++,t>>8);case 1:this.helperView.setUint8(i++,t);break;default:throw Error("Bad UINT size "+e)}this.write(this.helper.subarray(0,i))}writeEBMLVarInt(t,e=l(t)){let i=0;switch(e){case 1:this.helperView.setUint8(i++,128|t);break;case 2:this.helperView.setUint8(i++,64|t>>8),this.helperView.setUint8(i++,t);break;case 3:this.helperView.setUint8(i++,32|t>>16),this.helperView.setUint8(i++,t>>8),this.helperView.setUint8(i++,t);break;case 4:this.helperView.setUint8(i++,16|t>>24),this.helperView.setUint8(i++,t>>16),this.helperView.setUint8(i++,t>>8),this.helperView.setUint8(i++,t);break;case 5:this.helperView.setUint8(i++,8|t/r(2,32)&7),this.helperView.setUint8(i++,t>>24),this.helperView.setUint8(i++,t>>16),this.helperView.setUint8(i++,t>>8),this.helperView.setUint8(i++,t);break;case 6:this.helperView.setUint8(i++,4|t/r(2,40)&3),this.helperView.setUint8(i++,t/r(2,32)|0),this.helperView.setUint8(i++,t>>24),this.helperView.setUint8(i++,t>>16),this.helperView.setUint8(i++,t>>8),this.helperView.setUint8(i++,t);break;default:throw Error("Bad EBML VINT size "+e)}this.write(this.helper.subarray(0,i))}writeString(t){this.write(new Uint8Array(t.split("").map(t=>t.charCodeAt(0))))}writeEBML(t){var e,i;if(t instanceof Uint8Array)this.write(t);else if(Array.isArray(t))for(let s of t)this.writeEBML(s);else if(this.offsets.set(t,this.pos),this.writeUnsignedInt(t.id),Array.isArray(t.data)){let a=this.pos,r=null!=(e=t.size)?e:4;this.seek(this.pos+r);let h=this.pos;this.dataOffsets.set(t,h),this.writeEBML(t.data);let o=this.pos-h,l=this.pos;this.seek(a),this.writeEBMLVarInt(o,r),this.seek(l)}else if("number"==typeof t.data){let f=null!=(i=t.size)?i:u(t.data);this.writeEBMLVarInt(f),this.writeUnsignedInt(t.data,f)}else"string"==typeof t.data?(this.writeEBMLVarInt(t.data.length),this.writeString(t.data)):t.data instanceof Uint8Array?(this.writeEBMLVarInt(t.data.byteLength,t.size),this.write(t.data)):t.data instanceof n?(this.writeEBMLVarInt(4),this.writeFloat32(t.data.value)):t.data instanceof d&&(this.writeEBMLVarInt(8),this.writeFloat64(t.data.value))}},u=t=>t<256?1:t<65536?2:t<16777216?3:t<r(2,32)?4:t<r(2,40)?5:6,l=t=>{if(t<127)return 1;if(t<16383)return 2;if(t<2097151)return 3;if(t<268435455)return 4;if(t<r(2,35)-1)return 5;if(t<r(2,42)-1)return 6;throw Error("EBML VINT size not supported "+t)},f=class extends o{constructor(){super(),this.buffer=new ArrayBuffer(r(2,16)),this.bytes=new Uint8Array(this.buffer)}ensureSize(t){let e=this.buffer.byteLength;for(;e<t;)e*=2;if(e===this.buffer.byteLength)return;let i=new ArrayBuffer(e),s=new Uint8Array(i);s.set(this.bytes,0),this.buffer=i,this.bytes=s}write(t){this.ensureSize(this.pos+t.byteLength),this.bytes.set(t,this.pos),this.pos+=t.byteLength}seek(t){this.pos=t}finalize(){return this.ensureSize(this.pos),this.buffer.slice(0,this.pos)}},c=r(2,24),p=class extends o{constructor(t){super(),this.chunks=[],this.stream=t}write(t){this.writeDataIntoChunks(t,this.pos),this.flushChunks(),this.pos+=t.byteLength}writeDataIntoChunks(t,e){let i=this.chunks.findIndex(t=>t.start<=e&&e<t.start+c);-1===i&&(i=this.createChunk(e));let s=this.chunks[i],a=e-s.start,r=t.subarray(0,Math.min(c-a,t.byteLength));if(s.data.set(r,a),w(s,{start:a,end:a+r.byteLength}),0===s.written[0].start&&s.written[0].end===c&&(s.shouldFlush=!0),this.chunks.length>2){for(let h=0;h<this.chunks.length-1;h++)this.chunks[h].shouldFlush=!0;this.flushChunks()}r.byteLength<t.byteLength&&this.writeDataIntoChunks(t.subarray(r.byteLength),e+r.byteLength)}createChunk(t){let e={start:Math.floor(t/c)*c,data:new Uint8Array(c),written:[],shouldFlush:!1};return this.chunks.push(e),this.chunks.sort((t,e)=>t.start-e.start),this.chunks.indexOf(e)}flushChunks(t=!1){for(let e=0;e<this.chunks.length;e++){let i=this.chunks[e];if(i.shouldFlush||t){for(let s of i.written)this.stream.write({type:"write",data:i.data.subarray(s.start,s.end),position:i.start+s.start});this.chunks.splice(e--,1)}}}seek(t){this.pos=t}finalize(){this.flushChunks(!0)}},w=(t,e)=>{let i=0,s=t.written.length-1,a=-1;for(;i<=s;){let r=Math.floor(i+(s-i+1)/2);t.written[r].start<=e.start?(i=r+1,a=r):s=r-1}for(t.written.splice(a+1,0,e),(-1===a||t.written[a].end<e.start)&&a++;a<t.written.length-1&&t.written[a].end>=t.written[a+1].start;)t.written[a].end=Math.max(t.written[a].end,t.written[a+1].end),t.written.splice(a+1,1)},g=r(2,15),m=r(2,12),k="https://github.com/Vanilagy/webm-muxer",C=class{constructor(t){this.duration=0,this.videoChunkQueue=[],this.audioChunkQueue=[],this.lastVideoTimestamp=0,this.lastAudioTimestamp=0,this.finalized=!1,this.options=t,"buffer"===t.target?this.target=new f:this.target=new p(t.target),this.createFileHeader()}createFileHeader(){this.writeEBMLHeader(),this.createSeekHead(),this.createSegmentInfo(),this.createTracks(),this.createSegment(),this.createCues()}writeEBMLHeader(){this.target.writeEBML({id:440786851,data:[{id:17030,data:1},{id:17143,data:1},{id:17138,data:4},{id:17139,data:8},{id:17026,data:"webm"},{id:17031,data:2},{id:17029,data:2}]})}createSeekHead(){let t=new Uint8Array([28,83,187,107]),e=new Uint8Array([21,73,169,102]),i=new Uint8Array([22,84,174,107]);this.seekHead={id:290298740,data:[{id:19899,data:[{id:21419,data:t},{id:21420,size:5,data:0}]},{id:19899,data:[{id:21419,data:e},{id:21420,size:5,data:0}]},{id:19899,data:[{id:21419,data:i},{id:21420,size:5,data:0}]}]}}createSegmentInfo(){let t={id:17545,data:new d(0)};this.segmentDuration=t,this.segmentInfo={id:357149030,data:[{id:2807729,data:1e6},{id:19840,data:k},{id:22337,data:k},t]}}createTracks(){let t={id:374648427,data:[]};if(this.tracksElement=t,this.options.video){this.videoCodecPrivate={id:236,size:4,data:new Uint8Array(m)};let e={id:21936,data:[{id:21937,data:2},{id:21946,data:2},{id:21947,data:2},{id:21945,data:0}]};this.colourElement=e,t.data.push({id:174,data:[{id:215,data:1},{id:29637,data:1},{id:131,data:1},{id:134,data:this.options.video.codec},this.videoCodecPrivate,this.options.video.frameRate?{id:2352003,data:1e9/this.options.video.frameRate}:null,{id:224,data:[{id:176,data:this.options.video.width},{id:186,data:this.options.video.height},e]}].filter(Boolean)})}this.options.audio&&(this.audioCodecPrivate={id:236,size:4,data:new Uint8Array(m)},t.data.push({id:174,data:[{id:215,data:2},{id:29637,data:2},{id:131,data:2},{id:134,data:this.options.audio.codec},this.audioCodecPrivate,{id:225,data:[{id:181,data:new n(this.options.audio.sampleRate)},{id:159,data:this.options.audio.numberOfChannels},this.options.audio.bitDepth?{id:25188,data:this.options.audio.bitDepth}:null].filter(Boolean)}]}))}createSegment(){let t={id:408125543,size:6,data:[this.seekHead,this.segmentInfo,this.tracksElement]};this.segment=t,this.target.writeEBML(t)}createCues(){this.cues={id:475249515,data:[]}}get segmentDataOffset(){return this.target.dataOffsets.get(this.segment)}addVideoChunk(t,e,i){let s=new Uint8Array(t.byteLength);t.copyTo(s),this.addVideoChunkRaw(s,t.type,null!=i?i:t.timestamp,e)}addVideoChunkRaw(t,e,i,s){if(this.ensureNotFinalized(),!this.options.video)throw Error("No video track declared.");s&&this.writeVideoDecoderConfig(s);let a=this.createInternalChunk(t,e,i,1);for("V_VP9"===this.options.video.codec&&this.fixVP9ColorSpace(a),this.lastVideoTimestamp=a.timestamp;this.audioChunkQueue.length>0&&this.audioChunkQueue[0].timestamp<=a.timestamp;){let r=this.audioChunkQueue.shift();this.writeSimpleBlock(r)}!this.options.audio||a.timestamp<=this.lastAudioTimestamp?this.writeSimpleBlock(a):this.videoChunkQueue.push(a)}writeVideoDecoderConfig(t){if(t.decoderConfig){if(t.decoderConfig.colorSpace){let e=t.decoderConfig.colorSpace;this.colorSpace=e,this.colourElement.data=[{id:21937,data:{rgb:1,bt709:1,bt470bg:5,smpte170m:6}[e.matrix]},{id:21946,data:{bt709:1,smpte170m:6,"iec61966-2-1":13}[e.transfer]},{id:21947,data:{bt709:1,bt470bg:5,smpte170m:6}[e.primaries]},{id:21945,data:[1,2][Number(e.fullRange)]}];let i=this.target.pos;this.target.seek(this.target.offsets.get(this.colourElement)),this.target.writeEBML(this.colourElement),this.target.seek(i)}t.decoderConfig.description&&this.writeCodecPrivate(this.videoCodecPrivate,t.decoderConfig.description)}}fixVP9ColorSpace(t){if("key"!==t.type||!this.colorSpace)return;let e=0;if(2!==y(t.data,0,2))return;e+=2;let i=(y(t.data,e+1,e+2)<<1)+y(t.data,e+0,e+1);e+=2,3===i&&e++;let s=y(t.data,e+0,e+1);if(e++,s)return;let a=y(t.data,e+0,e+1);if(e++,0!==a)return;e+=2;let r=y(t.data,e+0,e+24);if(e+=24,4817730!==r)return;i>=2&&e++;let h={rgb:7,bt709:2,bt470bg:1,smpte170m:3}[this.colorSpace.matrix];b(t.data,e+0,e+3,h)}addAudioChunk(t,e,i){let s=new Uint8Array(t.byteLength);t.copyTo(s),this.addAudioChunkRaw(s,t.type,null!=i?i:t.timestamp,e)}addAudioChunkRaw(t,e,i,s){if(this.ensureNotFinalized(),!this.options.audio)throw Error("No audio track declared.");let a=this.createInternalChunk(t,e,i,2);for(this.lastAudioTimestamp=a.timestamp;this.videoChunkQueue.length>0&&this.videoChunkQueue[0].timestamp<=a.timestamp;){let r=this.videoChunkQueue.shift();this.writeSimpleBlock(r)}!this.options.video||a.timestamp<=this.lastVideoTimestamp?this.writeSimpleBlock(a):this.audioChunkQueue.push(a),(null==s?void 0:s.decoderConfig)&&this.writeCodecPrivate(this.audioCodecPrivate,s.decoderConfig.description)}createInternalChunk(t,e,i,s){return{data:t,type:e,timestamp:i,trackNumber:s}}writeSimpleBlock(t){let e=Math.floor(t.timestamp/1e3);if("key"!==t.type&&e-this.currentClusterTimestamp>=g)throw Error(`Current Matroska cluster exceeded its maximum allowed length of ${g} milliseconds. In order to produce a correct WebM file, you must pass in a video key frame at least every ${g} milliseconds.`);let i=(1===t.trackNumber||!this.options.video)&&"key"===t.type&&e-this.currentClusterTimestamp>=1e3;(!this.currentCluster||i)&&this.createNewCluster(e);let s=new Uint8Array(4),a=new DataView(s.buffer);a.setUint8(0,128|t.trackNumber),a.setUint16(1,e-this.currentClusterTimestamp,!1),a.setUint8(3,Number("key"===t.type)<<7);let r={id:163,data:[s,t.data]};this.target.writeEBML(r),this.duration=Math.max(this.duration,e)}writeCodecPrivate(t,e){let i=this.target.pos;this.target.seek(this.target.offsets.get(t)),t=[{id:25506,size:4,data:new Uint8Array(e)},{id:236,size:4,data:new Uint8Array(m-2-4-e.byteLength)}],this.target.writeEBML(t),this.target.seek(i)}createNewCluster(t){this.currentCluster&&this.finalizeCurrentCluster(),this.currentCluster={id:524531317,size:5,data:[{id:231,data:t}]},this.target.writeEBML(this.currentCluster),this.currentClusterTimestamp=t;let e=this.target.offsets.get(this.currentCluster)-this.segmentDataOffset;this.cues.data.push({id:187,data:[{id:179,data:t},{id:183,data:[{id:247,data:1},{id:241,data:e}]}]})}finalizeCurrentCluster(){let t=this.target.pos-this.target.dataOffsets.get(this.currentCluster),e=this.target.pos;this.target.seek(this.target.offsets.get(this.currentCluster)+4),this.target.writeEBMLVarInt(t,5),this.target.seek(e)}finalize(){for(;this.videoChunkQueue.length>0;)this.writeSimpleBlock(this.videoChunkQueue.shift());for(;this.audioChunkQueue.length>0;)this.writeSimpleBlock(this.audioChunkQueue.shift());this.finalizeCurrentCluster(),this.target.writeEBML(this.cues);let t=this.target.pos,e=this.target.pos-this.segmentDataOffset;return(this.target.seek(this.target.offsets.get(this.segment)+4),this.target.writeEBMLVarInt(e,6),this.segmentDuration.data=new d(this.duration),this.target.seek(this.target.offsets.get(this.segmentDuration)),this.target.writeEBML(this.segmentDuration),this.seekHead.data[0].data[1].data=this.target.offsets.get(this.cues)-this.segmentDataOffset,this.seekHead.data[1].data[1].data=this.target.offsets.get(this.segmentInfo)-this.segmentDataOffset,this.seekHead.data[2].data[1].data=this.target.offsets.get(this.tracksElement)-this.segmentDataOffset,this.target.seek(this.target.offsets.get(this.seekHead)),this.target.writeEBML(this.seekHead),this.target.seek(t),this.finalized=!0,this.target instanceof f)?this.target.finalize():(this.target instanceof p&&this.target.finalize(),null)}ensureNotFinalized(){if(this.finalized)throw Error("Cannot add new video or audio chunks after the file has been finalized.")}},y=(t,e,i)=>{let s=0;for(let a=e;a<i;a++){let r=t[Math.floor(a/8)],h=7-(7&a);s<<=1,s|=(r&1<<h)>>h}return s},b=(t,e,i,s)=>{for(let a=e;a<i;a++){let r=Math.floor(a/8),h=t[r],n=7-(7&a);h&=~(1<<n),h|=(s&1<<i-a-1)>>i-a-1<<n,t[r]=h}},((t,r,h,n)=>{if(r&&"object"==typeof r||"function"==typeof r)for(let d of s(r))a.call(t,d)||void 0===d||e(t,d,{get:()=>r[d],enumerable:!(n=i(r,d))||n.enumerable});return t})(e({},"__esModule",{value:!0}),h));V=V.default,"object"==typeof t.exports&&(t.exports=V)}}]);
//# sourceMappingURL=307-7b10c94b70652ebf.js.map