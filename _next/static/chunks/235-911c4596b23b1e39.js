"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[235],{5235:function(e,t,i){i.r(t),i.d(t,{ObservableBTree:function(){return x},ObservableListSelection:function(){return S},default:function(){return P}});var s=i(4471),r=i(2093),h=i(4992),n=i(4045),o=i(6731),l=i(4601),a=i(7417);function d(e,t,i,s){s!==t&&e.set(e.subarray(s,t),s+1),e[s]=i}function c(e,t,i){i<t-1&&e.set(e.subarray(i+1,t),i)}class y{order;mid;minKeyCount;keys;keyCount;height;children;constructor(e,t,i,s,r){this.order=e,this.mid=this.order>>1,this.minKeyCount=(this.order+1>>1)-1,this.keys=t,this.keyCount=i,this.height=s,this.children=r}split(e,t,i){let s,r;let h=new Int32Array(this.order-1);return t<this.mid?(s=this.keys[this.mid-1],h.set(this.keys.subarray(this.mid),0),d(this.keys,this.mid-1,e,t),i?(r=this.children.splice(this.mid,this.order-this.mid),this.children.splice(t+1,0,i)):r=Array(this.order)):(t===this.mid?(s=e,h.set(this.keys.subarray(this.mid),0)):(s=this.keys[this.mid],t!==this.mid+1&&h.set(this.keys.subarray(this.mid+1,t),0),h[t-this.mid-1]=e,h.set(this.keys.subarray(t),t-this.mid)),i?(r=this.children.splice(this.mid+1,this.order-this.mid-1)).splice(t-this.mid,0,i):r=Array(this.order)),this.keyCount=this.mid,{key:s,child:new y(this.order,h,this.order-1-this.mid,this.height,r)}}search(e){let t=0,i=this.keyCount-1;for(;t<=i;){let s=t+i>>1;if(this.keys[s]===e)return s;this.keys[s]<e?t=s+1:i=s-1}return~t}has(e){let t=this.search(e);return t>=0||this.height>0&&(t=~t,this.children[t].has(e))}add(e){let t=this.search(e);if(t>=0)return!1;if(t=~t,0===this.height)return this.keyCount===this.order-1?this.split(e,t):(d(this.keys,this.keyCount,e,t),this.keyCount+=1,!0);let i=this.children[t].add(e);if("object"==typeof i){if(this.keyCount===this.order-1)return this.split(i.key,t,i.child);d(this.keys,this.keyCount,i.key,t),this.keyCount+=1,this.children.splice(t+1,0,i.child)}return!0}delete(e){let t=this.search(e);if(t>=0)return this.deleteAt(t),!0;if(this.height>0){t=~t;let i=this.children[t].delete(e);return i&&this.balance(t),i}return!1}max(){return 0===this.height?this.keys[this.keyCount-1]:this.children[this.keyCount].max()}balance(e){let t=this.children[e];if(t.keyCount>=this.minKeyCount)return;if(e>0){let i=this.children[e-1];if(i.keyCount>this.minKeyCount){d(t.keys,t.keyCount,this.keys[e-1],0),this.height>1&&t.children.splice(0,0,i.children[i.keyCount]),t.keyCount+=1,this.keys[e-1]=i.keys[i.keyCount-1],i.keyCount-=1;return}if(i.keys[i.keyCount]=this.keys[e-1],i.keyCount+=1,i.keys.set(t.keys.subarray(0,t.keyCount),i.keyCount),this.height>1)for(let e=0;e<=t.keyCount;e+=1)i.children[i.keyCount+e]=t.children[e];i.keyCount+=t.keyCount,c(this.keys,this.keyCount,e-1),this.children.splice(e,1),this.keyCount-=1;return}let i=this.children[e+1];if(i.keyCount>this.minKeyCount){t.keys[t.keyCount]=this.keys[e],this.height>1&&(t.children[t.keyCount+1]=i.children.splice(0,1)[0]),t.keyCount+=1,this.keys[e]=i.keys[0],c(i.keys,i.keyCount,0),i.keyCount-=1;return}if(t.keys[t.keyCount]=this.keys[e],t.keyCount+=1,t.keys.set(i.keys.subarray(0,i.keyCount),t.keyCount),this.height>1)for(let e=0;e<=i.keyCount;e+=1)t.children[t.keyCount+e]=i.children[e];t.keyCount+=i.keyCount,c(this.keys,this.keyCount,e),this.children.splice(e+1,1),this.keyCount-=1}deleteMax(){if(0===this.height){this.keyCount-=1;return}let e=this.children[this.keyCount];e.deleteMax(),this.balance(this.keyCount)}deleteAt(e){if(0===this.height){c(this.keys,this.keyCount,e),this.keyCount-=1;return}let t=this.children[e].max();this.keys[e]=t,this.children[e].deleteMax(),this.balance(e)}*[Symbol.iterator](){if(this.height>0){for(let e=0;e<this.keyCount;e+=1)yield*this.children[e],yield this.keys[e];yield*this.children[this.keyCount]}else for(let e=0;e<this.keyCount;e+=1)yield this.keys[e]}}class u{order;root;size=0;constructor(e){this.order=e,this.root=new y(e,new Int32Array(e-1),0,0,Array(e))}has(e){let t=this.root;for(;;){let i=t.search(e);if(i>=0)return!0;if(!(t=t.children[~i]))return!1}}add(e){let t=this.root.add(e);if("object"==typeof t){let e=new Int32Array(this.order-1);e[0]=t.key;let i=Array(this.order);i[0]=this.root,i[1]=t.child,this.root=new y(this.order,e,1,this.root.height+1,i)}return t&&(this.size+=1),!!t}delete(e){let t=this.root.delete(e);return t&&(this.root.height>0&&0===this.root.keyCount&&(this.root=this.root.children[0]),this.size-=1),t}clear(){this.root.keyCount=0,this.root.height=0,this.root.children=Array(this.order),this.size=0}[Symbol.iterator](){return this.root[Symbol.iterator]()}}var k=i(6323),g=i(6779),m=i(9614),C=i.n(m),p=i(9883),f=i(1001),b=i(97);class x{get order(){return this.data.order}get root(){return this.data.root}get size(){return this.keys.reportObserved(),this.data.size}has(e){if(!this.hasMap.has(e)){let t=k.LO.box(this.data.has(e));(0,k.pA)(t,()=>this.hasMap.delete(e)),this.hasMap.set(e,t)}return this.hasMap.get(e).get()}add(e){if(this.data.add(e)){var t;return null===(t=this.hasMap.get(e))||void 0===t||t.set(!0),this.keys.reportChanged(),!0}return!1}delete(e){if(this.data.delete(e)){var t;return null===(t=this.hasMap.get(e))||void 0===t||t.set(!1),this.keys.reportChanged(),!0}return!1}clear(){if(0!==this.data.size){for(let e of(this.data.clear(),this.hasMap))e[1].set(!1);this.keys.reportChanged()}}[Symbol.iterator](){return this.keys.reportObserved(),this.data[Symbol.iterator]()}constructor(e){this.data=new u(e),this.hasMap=new Map,this.keys=(0,k.cp)("ObservableBTree.keys")}}let w=Symbol.iterator;class S{get size(){return this.selected.size}has(e){return this.selected.has(e)}select(e,t,i){if(null!==this.rangeStart&&i){t||this.selected.clear();let[i,s]=[this.rangeStart,e];i>s&&([i,s]=[s,i]);for(let e=i;e<=s;e+=1)this.selected.add(e);this.selectedIndex=e;return}if(t){this.selected.has(e)?(this.selected.delete(e),this.selectedIndex=null):(this.selected.add(e),this.selectedIndex=e),this.rangeStart=e;return}this.selected.clear(),this.selected.add(e),this.rangeStart=e,this.selectedIndex=e}clear(){this.selected.clear(),this.rangeStart=0,this.selectedIndex=null}[w](){return this.selected[Symbol.iterator]()}constructor(){this.selected=new x(6),this.rangeStart=0,this.selectedIndex=null,(0,k.ky)(this)}}let v={[a.wj.Auth]:"AUTH",[a.wj.Close]:"CLSE",[a.wj.Connect]:"CNXN",[a.wj.OK]:"OKAY",[a.wj.Open]:"OPEN",[a.wj.Write]:"WRTE"},j=new class{get empty(){return!f.d.logs.length}get commandBarItems(){return[{key:"clear",disabled:this.empty,iconProps:{iconName:b.PJ.Delete},text:"Clear",onClick:(0,k.aD)(()=>f.d.clearLog())},{key:"select-all",disabled:this.empty,iconProps:{iconName:b.PJ.Wand},text:"Select All",onClick:(0,k.aD)(()=>{this.selection.clear(),this.selection.select(f.d.logs.length-1,!1,!0)})},{key:"copy",disabled:0===this.selection.size,iconProps:{iconName:b.PJ.Copy},text:"Copy",onClick:()=>{let e="";for(let t of this.selection){let i=f.d.logs[t];e+="".concat(i.timestamp.toISOString(),"	").concat("in"===i.direction?"IN":"OUT","	").concat(v[i.command],"	").concat(i.arg0.toString(16).padStart(8,"0"),"	").concat(i.arg1.toString(16).padStart(8,"0"),"	").concat(Array.from(i.payload).map(e=>e.toString(16).padStart(2,"0")).join(" "),"\n")}navigator.clipboard.writeText(e)}}]}constructor(){this.selection=new S,(0,k.ky)(this,{}),(0,k.EH)(()=>{0===f.d.logs.length&&(0,k.z)(()=>this.selection.clear())})}},A=(0,n.Z)({grow:{height:0},grid:{height:"100%"},header:{textAlign:"center",lineHeight:"".concat(32,"px")},row:{"&:hover":{backgroundColor:"#f3f2f1"}},selected:{backgroundColor:"#edebe9"},code:{fontFamily:"monospace",textOverflow:"ellipsis",whiteSpace:"nowrap",lineHeight:"32px",cursor:"default",...o.q5.overflow("hidden")},hexViewer:{...o.q5.padding("12px"),...o.q5.borderTop("1px","solid","rgb(243, 242, 241)")}}),N=[{title:"Direction",width:100,CellComponent:(0,b.$g)("Direction")(e=>{let{className:t,rowIndex:i,...r}=e,h=f.d.logs[i],n=A();return(0,s.jsx)("div",{className:(0,l.z)(t,n.code),...r,children:h.direction})})},{title:"Command",width:100,CellComponent:(0,b.$g)("Command")(e=>{let{className:t,rowIndex:i,...r}=e,h=f.d.logs[i];if(!h.commandString){var n;h.commandString=null!==(n=v[h.command])&&void 0!==n?n:(0,a.FO)(new Uint32Array([h.command]))}let o=A();return(0,s.jsx)("div",{className:(0,l.z)(t,o.code),...r,children:h.commandString})})},{title:"Arg0",width:100,CellComponent:(0,b.$g)("Command")(e=>{let{className:t,rowIndex:i,...r}=e,h=f.d.logs[i];h.arg0String||(h.arg0String=h.arg0.toString(16).padStart(8,"0"));let n=A();return(0,s.jsx)("div",{className:(0,l.z)(t,n.code),...r,children:h.arg0String})})},{title:"Arg1",width:100,CellComponent:(0,b.$g)("Command")(e=>{let{className:t,rowIndex:i,...r}=e,h=f.d.logs[i];h.arg1String||(h.arg1String=h.arg1.toString(16).padStart(8,"0"));let n=A();return(0,s.jsx)("div",{className:(0,l.z)(t,n.code),...r,children:h.arg1String})})},{title:"Payload",width:200,flexGrow:1,CellComponent:(0,b.$g)("Command")(e=>{let{className:t,rowIndex:i,...r}=e,h=f.d.logs[i];h.payloadString||(h.payloadString=(0,p.lr)(h.payload.subarray(0,100)));let n=A();return(0,s.jsx)("div",{className:(0,l.z)(t,n.code),...r,children:h.payloadString})})}],z=(0,b.$g)("Header")(e=>{let{className:t,columnIndex:i,...r}=e,h=A();return(0,s.jsx)("div",{className:(0,l.z)(t,h.header),...r,children:N[i].title})}),I=(0,g.Pi)(function(e){let{className:t,rowIndex:i,...r}=e,h=A(),n=(0,b.R9)(e=>{(0,k.z)(()=>{e.preventDefault(),e.stopPropagation(),j.selection.select(i,e.ctrlKey,e.shiftKey)})});return(0,s.jsx)("div",{className:(0,l.z)(t,h.row,j.selection.has(i)&&h.selected),onPointerDown:n,...r})}),O=()=>{let e=A();return(0,s.jsxs)(r.K,{...b.LE,tokens:{},children:[(0,s.jsx)(C(),{children:(0,s.jsx)("title",{children:"Packet Log - Android Web Toolbox"})}),(0,s.jsx)(p.X3,{items:j.commandBarItems}),(0,s.jsx)(h.v,{className:e.grow,grow:!0,children:(0,s.jsx)(p.rj,{className:e.grid,rowCount:f.d.logs.length,rowHeight:32,columns:N,HeaderComponent:z,RowComponent:I})}),null!==j.selection.selectedIndex&&f.d.logs[j.selection.selectedIndex].payload.length>0&&(0,s.jsx)(h.v,{className:e.grow,grow:!0,children:(0,s.jsx)(p.Kb,{className:e.hexViewer,data:f.d.logs[j.selection.selectedIndex].payload})})]})};var P=(0,g.Pi)(O)}}]);
//# sourceMappingURL=235-911c4596b23b1e39.js.map